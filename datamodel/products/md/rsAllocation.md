# Data Model: rsAllocation


Allocation for each field in this robotstrategy run


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDU List](#example-hdu-list)


---

## Basic Information
Allocation for each field in this robotstrategy run. Produced by the robostrategy script rs_allocate.

### Naming Convention
$ROBOSTRATEGY_DATA/allocations/[PLAN]/rsAllocation-[PLAN]-[OBSERVATORY].fits

### Releases
WORK

### Enviroments
ROBOSTRATEGY_DATA

### Approximate Size
1 GB

### File Type
FITS

### Generated by Product
robostrategy

### HDU List for release WORK
  - [HDU0: PRIMARY](#hdu0-primary)
  - [HDU1: ](#hdu1-)
  - [HDU2: ](#hdu2-)
  - [HDU3: ](#hdu3-)
  - [HDU4: ](#hdu4-)
  - [HDU5: ](#hdu5-)
  - [HDU6: ](#hdu6-)
  - [HDU7: ](#hdu7-)


---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another

---
## Example HDU List


### HDU0: PRIMARY
Primary header

#### HDU Type: IMAGE
#### HDU Size:  0 bytes

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | file does conform to FITS standard |
| BITPIX | 16 | number of bits per data pixel |
| NAXIS | 0 | number of data axes |
| EXTEND | True | FITS dataset may contain extensions |
| COMMENT |   FITS (Flexible Image Transport System) format is defined in 'Astronomy |  |
| COMMENT |   and Astrophysics', volume 376, page 359; bibcode: 2001A&A...376..359H |  |



### HDU1: 
Allocation of cadence to each field

#### HDU Type: BINARY TABLE
#### HDU Size:  2 MB

##### Binary Table Caption for HDU1
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | fieldid | int32 |  | field id number |
 | racen | float64 | deg | RA J2000 of field center |
 | deccen | float64 | deg | Dec J2000 of field center |
 | cadence | char[30] |  | Cadence name allocated |
 | nfilled | int32 |  | Number of exposures filled |
 | needed | int32 |  | Number of exposured needed |
 | xfactor | float32[24, 2] |  | Cost factor for field in each sky brightness / LST slot |
 | slots_exposures | float32[24, 2] |  | Exposures allocated to each sky brightness / LST slot |
 | slots_time | float32[24, 2] | hours | Time allocated to each sky brightness / LST slot |



### HDU2: 
Binary image of hours per LST and sky brightness slot (from rsSlots file)

#### HDU Type: IMAGE
#### HDU Size:  192 bytes

##### Header Table Caption for HDU2
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | file does conform to FITS standard |
| BITPIX | -32 | number of bits per data pixel |
| NAXIS | 2 | number of data axes |
| NAXIS1 | 2 | length of data axis 1 |
| NAXIS2 | 24 | length of data axis 2 |
| EXTEND | True | FITS dataset may contain extensions |
| COMMENT |   FITS (Flexible Image Transport System) format is defined in 'Astronomy |  |
| COMMENT |   and Astrophysics', volume 376, page 359; bibcode: 2001A&A...376..359H |  |
| STRATVER | 1.0.5 | version of robostrategy |
| SCHEDVER | 0.9.1 | version of roboscheduler |
| NLST | 24 | number of LST bins |
| DURATION | 0.3 | duration in hours of each slot considered |
| FCLEAR | 0.5 | Assumption for this observatory of clear fraction (not applied to numbers in image) |
| OBSERVAT | apo | Observatory, apo or lco |
| NSB | 2 | number of sky brightness bins |
| SB0 | 0.0 | edge 0 of sky brightness bins |
| SB1 | 0.35 | edge 1 of sky brightness bins |
| SB2 | 1.0 | edge 2 of sky brightness bins |



### HDU3: 
Binary table of fields (from rsFieldsRotated)

#### HDU Type: BINARY TABLE
#### HDU Size:  297 KB

##### Binary Table Caption for HDU3
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | FIELDID | int32 |  | Field identifier |
 | RACEN | float64 | deg | RA Center (J2000) |
 | DECCEN | float64 | deg | Dec Center (J2000) |
 | RADIUS | float32 | deg | Radius over which to output targets |
 | TYPE | char[30] |  | Type of field (used for setting cadence and allocation choices) |
 | PA1 | float32 | deg | proposed position angle using algorithm 1 (mean bearing to neighboring fields) |
 | PA2 | float32 | deg | proposed position angle using algorithm 2 (bearing to furthest neighboring field) |



### HDU4: 
Field slots information, with which slots can be used for a given field-cadence combination (from rsFieldSlots file)

#### HDU Type: BINARY TABLE
#### HDU Size:  221 MB

##### Binary Table Caption for HDU4
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | FIELDID | int32 |  | Field identifier |
 | CADENCE | char[30] |  | Name of cadence |
 | RACEN | float64 | deg | RA Center (J2000) |
 | DECCEN | float64 | deg | Dec Center (J2000) |
 | NEEDED | int32 |  | Number of exposures needed for this cadence |
 | NEEDED_SB | int32[2] |  | Number of exposures needed for this cadence of each sky brightness type (in dark, bright order) |
 | SLOTS | int32[24, 2] |  | 0 or 1 for whether the LST and skybrightness slot can be used for this field-cadence, based on sky brightness and airmass requirements. |



### HDU5: 
Field-cadence options, and the value associated with each (from rsOptions file)

#### HDU Type: BINARY TABLE
#### HDU Size:  1 GB

##### Binary Table Caption for HDU5
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | FIELDID | int32 |  | Field identifier |
 | RACEN | float64 | deg | RA Center (J2000) |
 | DECCEN | float64 | deg | Dec Center (J2000) |
 | NTARGETS | int32 |  | Total number of targets in rsFieldTargets file |
 | CADENCE | char[30] |  | Field cadence name |
 | NVISIT | int32 |  | Number of exposures for this cadence |
 | NWITHIN | int32 |  | Number of targets reachable by a suitable positioner |
 | NGOT | int32 |  | Number of targets gotten |
 | VALUEGOT | float32 |  | Total value of targets gotten |
 | NWITHIN_PCD | int32[32] |  | Number of targets reachable by a suitable positioner, for each target cadence (see HDU7) |
 | NGOT_PCD | int32[32] |  | Number of targets gotten for each target cadence (see HDU7) |
 | VALUEGOT_PCD | float32[32] |  | Total value of targets gotten for each target cadence (see HDU7) |
 | NWITHIN_PCT | int32[82] |  | Number of targets reachable by a suitable positioner, for each target carton (see HDU6) |
 | NGOT_PCT | int32[82] |  | Number of targets gotten for each target carton (see HDU6) |
 | VALUEGOT_PCT | float32[82] |  | Total value of targets gotten for each target carton (see HDU6) |



### HDU6: 
List of cartons for arrays in HDU5

#### HDU Type: BINARY TABLE
#### HDU Size:  4 KB

##### Binary Table Caption for HDU6
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | CARTON | char[50] |  | Carton names |



### HDU7: 
List of cadences for arrays in HDU5

#### HDU Type: BINARY TABLE
#### HDU Size:  1 KB

##### Binary Table Caption for HDU7
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | CADENCES | char[50] |  | Cadence name |


