# Data Model: spFluxcalib_epoch


The Flux Calibration image for epoch coadds


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDUS List](#example-hdus-list)
- [Notes](#notes)
- [Regrets](#regrets)
---

## Basic Information
Contains the calibration vectors for a given frame

### Naming Convention
$BOSS_SPECTRO_REDUX/[RUN2D]/fields/[FIELDGRP]/[FIELD]/epoch/spFluxcalib-[BR][ID]-[FRAME].fits.gz

### Releases
IPL4

### Enviroments
BOSS_SPECTRO_REDUX

### Approximate Size
16 MB

### File Type
FITS

### Generated by Product
idlspec2d this product.

### Is a VAC
False

### Data Level
1.2.4

### HDUS List for release IPL4
  - [HDU0: CALIBIMG](#hdu0-calibimg)
  - [HDU1: BSPLINE](#hdu1-bspline)
  - [HDU2: STDSTARS](#hdu2-stdstars)
  - [HDU3: BSPLINE_STD](#hdu3-bspline_std)
  - [HDU4: OUTPUT](#hdu4-output)

---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another

---
## Example HDUS List

### HDU0: CALIBIMG
Image with the flux calibration vector for each fiber.

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | Primary Header created by MWRFITS v1.13 |
| BITPIX | -32 |  |
| NAXIS | 2 |  |
| NAXIS1 | 4112 |  |
| NAXIS2 | 500 |  |
| EXTEND | True | Extensions may be present |
| WAVEMIN | 3473.0 |  |
| WAVEMAX | 6442.45 |  |
| EXTNAME | CALIBIMG |  |



### HDU1: BSPLINE
Binary table with traceset structure of b-spline fits for calibration vectors. This is a compact version of the information in the primary HDU.

#### HDU Type: BINARY TABLE
#### HDU Size:  3 KB

##### Header Table Caption for HDU1
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | Binary table written by MWRFITS v1.13 |
| BITPIX | 8 | Required value |
| NAXIS | 2 | Required value |
| NAXIS1 | 3508 | Number of bytes per row |
| NAXIS2 | 1 | Number of rows |
| PCOUNT | 0 | Normally 0 (no varying arrays) |
| GCOUNT | 1 | Required value |
| TFIELDS | 5 | Number of columns in table |
| COMMENT |  |  |
| COMMENT |  *** End of mandatory fields *** |  |
| COMMENT |  |  |
| EXTNAME | BSPLINE |  |
| COMMENT |  |  |
| COMMENT |  *** Column formats *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column names *** |  |
| COMMENT |  |  |

##### Binary Table Caption for HDU1
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | FULLBKPT | float32[252] |  | Breakpoint vector |
 | BKMASK | int16[252] |  | mask of the breakpoint vector |
 | NORD | int32 |  | Number of orders for Bspline fit |
 | COEFF | float32[249] |  | The bspline coeffients |
 | ICOEFF | float32[249] |  | inversion bspline coeffients |



### HDU2: STDSTARS
Binary table with information about the standard stars used to construct the calibration vector.

#### HDU Type: BINARY TABLE
#### HDU Size:  5 MB

##### Header Table Caption for HDU2
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | Binary table written by MWRFITS v1.13 |
| BITPIX | 8 | Required value |
| NAXIS | 2 | Required value |
| NAXIS1 | 82645 | Number of bytes per row |
| NAXIS2 | 70 | Number of rows |
| PCOUNT | 0 | Normally 0 (no varying arrays) |
| GCOUNT | 1 | Required value |
| TFIELDS | 23 | Number of columns in table |
| COMMENT |  |  |
| COMMENT |  *** End of mandatory fields *** |  |
| COMMENT |  |  |
| EXTNAME | STDSTARS |  |
| COMMENT |  |  |
| COMMENT |  *** Column formats *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column names *** |  |
| COMMENT |  |  |

##### Binary Table Caption for HDU2
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | FIELDID | int32 |  | SDSS FieldID (plateID for plate era data) |
 | CATALOGID | int64 |  | CatalogID or uHHMMSS.S+DDMMSS.S for unassigned |
 | SDSS_ID | int64 |  | SDSS_ID of Target |
 | MJD | int32 |  | MJD of observation |
 | FIBERID | int32 |  | Fiber of observation |
 | QGOOD | int16 |  | quality flag |
 | MODEL | char[3] |  | Model Name |
 | G | float32 | cm/s^2 | surface gravity |
 | TEFF | float32 | K | Effective Temperature |
 | FEH | float32 | solar | metallicity |
 | IMODEL | int32 |  | index of model |
 | Z | float64 |  | Redshift of fit |
 | SN_MEDIAN | float32 |  | S/N of spectra |
 | CHI2 | float32 |  | Chi-square of model fit |
 | DOF | float32 |  | degrees of freedom |
 | LINESN_MEDIAN | float32 |  | S/N near absorption lines |
 | LINECHI2 | float64 |  | CHi-square of fit near absorption lines |
 | LINEDOF | float32 |  | degrees of freedom of fit near absorption lines |
 | LOGLAM | float32[4128] | log10(AA) | Log Lambda |
 | OBJFLUX | float32[4128] | nanomaggy | Flux of object |
 | MODELFLUX | float32[4128] | nanomaggy | Flux of model fit |
 | MRATIO | float32[4128] |  | MRATIO vectors are the "raw" flux-calib vectors for each expos+CCD |
 | MRATIVAR | float32[4128] |  | Ivar of MRATIO |



### HDU3: BSPLINE_STD
Binary table with traceset structure of b-spline fits for calibration vectors of all standards.

#### HDU Type: BINARY TABLE
#### HDU Size:  3 KB

##### Header Table Caption for HDU3
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | Binary table written by MWRFITS v1.13 |
| BITPIX | 8 | Required value |
| NAXIS | 2 | Required value |
| NAXIS1 | 3508 | Number of bytes per row |
| NAXIS2 | 1 | Number of rows |
| PCOUNT | 0 | Normally 0 (no varying arrays) |
| GCOUNT | 1 | Required value |
| TFIELDS | 5 | Number of columns in table |
| COMMENT |  |  |
| COMMENT |  *** End of mandatory fields *** |  |
| COMMENT |  |  |
| EXTNAME | BSPLINE_STD |  |
| COMMENT |  |  |
| COMMENT |  *** Column formats *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column names *** |  |
| COMMENT |  |  |

##### Binary Table Caption for HDU3
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | FULLBKPT | float32[252] |  | Breakpoint vector |
 | BKMASK | int16[252] |  | mask of the breakpoint vector |
 | NORD | int32 |  | Number of orders for Bspline fit |
 | COEFF | float32[249] |  | The bspline coefficients |
 | ICOEFF | float32[249] |  | inversion bspline coefficients |



### HDU4: OUTPUT
Output structure

#### HDU Type: BINARY TABLE
#### HDU Size:  10 MB

##### Header Table Caption for HDU4
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | Binary table written by MWRFITS v1.13 |
| BITPIX | 8 | Required value |
| NAXIS | 2 | Required value |
| NAXIS1 | 10531732 | Number of bytes per row |
| NAXIS2 | 1 | Number of rows |
| PCOUNT | 0 | Normally 0 (no varying arrays) |
| GCOUNT | 1 | Required value |
| TFIELDS | 8 | Number of columns in table |
| COMMENT |  |  |
| COMMENT |  *** End of mandatory fields *** |  |
| COMMENT |  |  |
| EXTNAME | OUTPUT |  |
| COMMENT |  |  |
| COMMENT |  *** Column formats *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column dimensions (2 D or greater) *** |  |
| COMMENT |  |  |
| TDIM1 | ( 4128, 1, 67) |  |
| TDIM2 | ( 4128, 1, 67) |  |
| TDIM3 | ( 4128, 1, 67) |  |
| TDIM4 | ( 4128, 1, 67) |  |
| TDIM7 | ( 2683, 500) |  |
| TDIM8 | ( 2683, 67) |  |
| COMMENT |  |  |
| COMMENT |  *** Column names *** |  |
| COMMENT |  |  |

##### Binary Table Caption for HDU4
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | THISLOGLAM | float32[276576] | log10(AA) | log lambda |
 | THISMRATIO | float32[276576] |  | MRATIO vectors are the "raw" flux-calib vectors for this expos+CCD |
 | THISMRATIVAR | float32[276576] |  | MRATIO vectors are the "raw" flux-calib vectors for this expos+CCD |
 | THISFLATARR | float32[276576] |  | polynomial fit of the object with respect to the model |
 | FRAC_SCAT | float64 |  | percental dispersion of the fluxing vectors used wrt the truth |
 | TMPLOGLAM | float64[2683] |  | output grid |
 | THISFLATARR_ALL | float32[1341500] |  | rpolynomial fit of the object with respect to the model for all star |
 | THISFLATARR_NEW | float32[179761] |  | polynomial fit of the object with respect to the model for all the std and all obj |



---
## Notes
None

---
## Regrets
I  have no regrets!