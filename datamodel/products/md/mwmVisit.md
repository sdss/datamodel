# Data Model: mwmVisit


individual spectra for a single star from APOGEE APO, APOGEE LCO, and BOSS


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDUS List](#example-hdus-list)
- [Notes](#notes)

---

## Basic Information
Individual spectra for a MWM source from BOSS, the APOGEE instrument at Apache Point Observatory, and the APOGEE instrument on the du Pont telescope at Las Campanas Observatory. These spectra are stacked to generate an mwmStar file, though note that bad spectra are excluded (see the IN_STACK for HDUs 1-4).

### Naming Convention
$MWM_ASTRA/[ASTRA_VERSION]/[RUN2D]-[APRED]/spectra/visit/[CATALOGID_GROUPS]/mwmVisit-[ASTRA_VERSION]-[CATALOGID].fits

### Releases
WORK

### Enviroments
MWM_ASTRA

### Approximate Size
1 MB

### File Type
FITS

### Generated by Product
astra

### Is a VAC
False

### HDUS List for release WORK
  - [HDU0: PRIMARY](#hdu0-primary)
  - [HDU1: BOSS/APO](#hdu1-boss/apo)
  - [HDU2: BOSS/LCO](#hdu2-boss/lco)
  - [HDU3: APOGEE/APO](#hdu3-apogee/apo)
  - [HDU4: APOGEE/LCO](#hdu4-apogee/lco)

---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another

---
## Example HDUS List

### HDU0: PRIMARY
Target information

#### HDU Type: IMAGE
#### HDU Size:  0 bytes

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | conforms to FITS standard |
| BITPIX | 8 | array data type |
| NAXIS | 0 | number of array dimensions |
| EXTEND | True |  |
| V_ASTRA | 0.2.6 | Astra version |
| CREATED | 22-10-18 04:32:07 | File creation time (UTC %y-%m-%d %H:%M:%S) |
| HEALPIX | 5454 | Healpix location (128 sides) |
| CAT_ID | 27021597906174631 | SDSS-V catalog identifier |
| TIC_ID | 219877921 | TESS Input Catalog (v8) identifier |
| GAIA_ID | 1650790991119524608 | Gaia DR2 source identifier |
| RA | 260.8847889451969 | SDSS-V catalog right ascension (J2000) [deg] |
| DEC | 70.85378600252214 | SDSS-V catalog declination (J2000) [deg] |
| GAIA_RA | 260.8847889451969 | Gaia DR2 right ascension [deg] |
| GAIA_DEC | 70.85378600252214 | Gaia DR2 declination [deg] |
| PLX | 20.16823478828524 | Gaia DR2 parallax [mas] |
| E_PLX | 0.05653599799947087 | Gaia DR2 parallax error [mas] |
| PMRA | -31.43803558469352 | Gaia DR2 proper motion in RA [mas/yr] |
| E_PMRA | 0.09460795642927922 | Gaia DR2 proper motion in RA error [mas/yr] |
| PMDE | -195.0432437896582 | Gaia DR2 proper motion in DEC [mas/yr] |
| E_PMDE | 0.1141010015090367 | Gaia DR2 proper motion in DEC error [mas/yr] |
| V_RAD | None | Gaia DR2 radial velocity [km/s] |
| E_V_RAD | None | Gaia DR2 radial velocity error [km/s] |
| G_MAG | 15.681586 | Gaia DR2 mean apparent G magnitude [mag] |
| BP_MAG | 17.51942 | Gaia DR2 mean apparent BP magnitude [mag] |
| RP_MAG | 14.379027 | Gaia DR2 mean apparent RP magnitude [mag] |
| J_MAG | 12.491 | 2MASS mean apparent J magnitude [mag] |
| E_J_MAG | 0.019 | 2MASS mean apparent J magnitude error [mag] |
| H_MAG | 11.926 | 2MASS mean apparent H magnitude [mag] |
| E_H_MAG | 0.013 | 2MASS mean apparent H magnitude error [mag] |
| K_MAG | 11.616 | 2MASS mean apparent K magnitude [mag] |
| E_K_MAG | 0.02 | 2MASS mean apparent K magnitude error [mag] |
| CARTON_0 | mwm_snc_100pc_boss | First carton for source (see documentation) |
| CARTONS | mwm_snc_100pc_boss,mwm_tess_planet,manual_planet_gaia_astrometry_v0,openfibertargets_nov2020_19a,openfibertargets_nov2020_34a,mwm_legacy_ir2opt | SDSS-V cartons |
| PROGRAMS | mwm_planet,mwm_snc,mwm_legacy,open_fiber | SDSS-V programs |
| MAPPERS | open,mwm | SDSS-V mappers |
| CHECKSUM | 2FhA3Ef72EfA2Ef5 | HDU checksum updated 2022-10-17T22:32:45 |
| DATASUM | 0 | data unit checksum updated 2022-10-17T22:32:45 |
| COMMENT | HDU 0: Source information only |  |
| COMMENT | HDU 1: BOSS spectra from Apache Point Observatory |  |
| COMMENT | HDU 2: BOSS spectra from Las Campanas Observatory |  |
| COMMENT | HDU 3: APOGEE spectra from Apache Point Observatory |  |
| COMMENT | HDU 4: APOGEE spectra from Las Campanas Observatory |  |



### HDU1: BOSS/APO
Spectra from the BOSS instrument at Apache Point Observatory

#### HDU Type: BINARY TABLE
#### HDU Size:  272 KB

##### Header Table Caption for HDU1
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | binary table extension |
| BITPIX | 8 | array data type |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 93138 | length of dimension 1 |
| NAXIS2 | 3 | length of dimension 2 |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| TFIELDS | 48 | number of table fields |
| EXTNAME | BOSS/APO | Short extension name |
| OBSRVTRY | APO | Observatory name |
| INSTRMNT | BOSS | Instrument name |
| V_BOSS | 6.0.1 | Version of the BOSS ICC |
| VJAEGER | 0.14.1-alpha.0 | Version of Jaeger |
| VKAIJU | 1.2.2-alpha.1 | Version of Kaiju |
| VCOORDIO | 1.2.2-alpha.1 | Version of coordIO |
| VCALIBS | APO.2021.12.25+960cb05 | Version of FPS calibrations |
| VERSIDL | 8.8.0 | Version of IDL |
| VERSUTIL | v5_5_17 | Version of idlutils |
| VERSREAD | v6_0_9 | Version of idlspec2d for processing raw data |
| VERS2D | v6_0_9 | Version of idlspec2d for 2D reduction |
| VERSCOMB | v6_0_9 | Version of idlspec2d for combining exposures |
| VERSLOG | trunk 27531 | Version of SPECLOG product |
| VERSFLAT | v1_34 | Version of SPECFLAT product |
| DIDFLUSH | True | Was CCD flushed before integration |
| CARTID | FPS-N | Cartridge identifier |
| PSFSKY | 3 | Order of PSF sky subtraction |
| PREJECT | 0.2 | Profile area rejection threshold |
| LOWREJ | 4 | Extraction: low rejection |
| HIGHREJ | 50 | Extraction: high rejection |
| SCATPOLY | 0 | Extraction: Order of scattered light polynomial |
| PROFTYPE | 1 | Extraction profile: 1=Gaussian |
| NFITPOLY | 1 | Extraction: Number of profile parameters |
| SKYCHI2 | 0.914361915393 | Mean \chi^2 of sky subtraction |
| SCHI2MIN | 0.914361915393 | Minimum \chi^2 of sky subtraction |
| SCHI2MAX | 0.914361915393 | Maximum \chi^2 of sky subtraction |
| V_HELIO | 1.56687012183 | Heliocentric velocity correction [km/s] |
| RDNOISE0 | 2.0681 | CCD read noise amp 0 [electrons] |
| NRES | 5 | Sinc bandlimit [pixel/resolution element] |
| FILTSIZE | 501 | Median filter size for pseudo-continuum [pixel] |
| NORMSIZE | 100 | Gaussian width for pseudo-continuum [pixel] |
| CONSCALE | False | Scale by pseudo-continuum when stacking |
| CRVAL | 3.5523 | Log(10) wavelength of first pixel [Angstrom] |
| CDELT | 0.0001 | Log(10) delta wavelength per pixel [Angstrom] |
| CTYPE | LOG-LINEAR | Wavelength solution description |
| CUNIT | Angstrom (Vacuum) | Wavelength solution unit |
| CRPIX | 1 | Pixel offset from the first pixel |
| DC-FLAG | 1 | Wavelength solution flag |
| NPIXELS | 4648 | Number of pixels per spectrum |
| TDIM2 | (4648) |  |
| TDIM3 | (4648) |  |
| TDIM4 | (4648) |  |
| TDIM5 | (4648) |  |
| CHECKSUM | ZRaQgOZOZOaOdOWO | HDU checksum updated 2022-10-17T22:32:45 |
| DATASUM | 1758921356 | data unit checksum updated 2022-10-17T22:32:45 |

##### Binary Table Caption for HDU1
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | SNR | float32 |  | Mean signal-to-noise ratio |
 | FLUX | float32[4648] |  | Source flux |
 | E_FLUX | float32[4648] |  | Standard deviation of source flux |
 | BITMASK | int64[4648] |  | Pixel-level bitmask (see documentation) |
 | WRESL | float32[4648] |  |  |
 | RELEASE | char[5] |  | SDSS data release name |
 | FILETYPE | char[8] |  | SDSS data model filetype |
 | MJD | int32 |  | Modified Julian Date of the observations |
 | RUN2D | char[6] |  | Spectro-2D reduction name |
 | FIELDID | int32 |  | Field identifier |
 | ISPLATE | char[1] |  | Whether the data were taken with plates |
 | CATALOGID | int64 |  | SDSS-V catalog identifier |
 | ALT | float32 | deg | Telescope altitude  |
 | AZ | float32 | deg | Telescope azimuth  |
 | SEEING | float32 | arcsecond | Median seeing conditions  |
 | AIRMASS | float32 |  | Mean airmass |
 | AIRTEMP | float32 | C | Air temperature  |
 | DEWPOINT | float32 | C | Dew point temperature  |
 | HUMIDITY | float32 | % | Humidity  |
 | PRESSURE | float32 | inch Hg? | Air pressure  |
 | GUSTD | float32 | deg | Wind gust direction  |
 | GUSTS | float32 | km/s | Wind gust speed  |
 | WINDD | float32 | deg | Wind direction  |
 | WINDS | float32 | km/s | Wind speed  |
 | MOON_DIST_MEAN | float32 | deg | Mean sky distance to the moon  |
 | MOON_PHASE_MEAN | float32 |  | Mean phase of the moon |
 | EXPTIME | int32 | s | Total exposure time  |
 | NEXP | int32 |  | Number of exposures taken |
 | NGUIDE | int32 |  | Number of guider frames during integration |
 | TAI-BEG | float32 | s | MJD (TAI) at start of integrations  |
 | TAI-END | float32 | s | MJD (TAI) at end of integrations  |
 | FIBER_OFFSET | bool |  | Position offset applied during observations |
 | DELTA_RA | float32 | arcsecond | Offset in right ascension  |
 | DELTA_DEC | float32 | arcsecond | Offset in declination  |
 | V_RAD | float32 |  | Radial velocity in Solar barycentric rest frame |
 | E_V_RAD | float32 | km/s | Error in radial velocity  |
 | RXC_XCSAO | float32 |  | Cross-correlation R-value (1979AJ.....84.1511T) |
 | V_BC | float32 | km/s | Solar barycentric velocity applied  |
 | TEFF_XCSAO | float32 | K | Effective temperature from XCSAO  |
 | E_TEFF_XCSAO | float32 | K | Error in effective temperature from XCSAO  |
 | LOGG_XCSAO | float32 |  | Surface gravity from XCSAO |
 | E_LOGG_XCSAO | float32 |  | Error in surface gravity from XCSAO |
 | FEH_XCSAO | float32 |  | Metallicity from XCSAO |
 | E_FEH_XCSAO | float32 |  | Error in metallicity from XCSAO |
 | V_SHIFT | float32 | km/s | Relative velocity shift used in stack  |
 | IN_STACK | bool |  | Was this spectrum used in the stack? |
 | ZWARNING | int32 |  | See sdss.org/dr17/algorithms/bitmasks/#ZWARNING |
 | DATA_PRODUCT_ID | int32 |  | Astra data product identifier |



### HDU2: BOSS/LCO
Placeholder for spectra from a BOSS instrument at Las Campanas Observatory should one exist.

#### HDU Type: BINARY TABLE
#### HDU Size:  0 bytes

##### Header Table Caption for HDU2
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | binary table extension |
| BITPIX | 8 | array data type |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 0 | length of dimension 1 |
| NAXIS2 | 0 | length of dimension 2 |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| TFIELDS | 0 | number of table fields |
| EXTNAME | BOSS/LCO |  |
| OBSRVTRY | LCO |  |
| INSTRMNT | BOSS |  |
| CHECKSUM | dhl7gZk6dfk6dZk6 | HDU checksum updated 2022-10-17T22:32:45 |
| DATASUM | 0 | data unit checksum updated 2022-10-17T22:32:45 |
| COMMENT | No BOSS data available from LCO for this source. |  |

##### Binary Table Caption for HDU2
Name | Type | Unit | Description |
| --- | --- | --- | --- |



### HDU3: APOGEE/APO
Spectra from the APOGEE instrument at Apache Point Observatory.

#### HDU Type: BINARY TABLE
#### HDU Size:  1 MB

##### Header Table Caption for HDU3
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | binary table extension |
| BITPIX | 8 | array data type |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 137349 | length of dimension 1 |
| NAXIS2 | 9 | length of dimension 2 |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| TFIELDS | 33 | number of table fields |
| EXTNAME | APOGEE/APO | Short extension name |
| OBSRVTRY | APO | Observatory name |
| INSTRMNT | APOGEE | Instrument name |
| V_APRED | 6fb9549cfadd8e08a69335736a315f1d533830da | apogee software version |
| NRES | 5 4.25 3.5 | Sinc bandlimit [pixel/resolution element] |
| FILTSIZE | 501 | Median filter size for pseudo-continuum [pixel] |
| NORMSIZE | 100 | Gaussian width for pseudo-continuum [pixel] |
| CONSCALE | False | Scale by pseudo-continuum when stacking |
| TEFF_D | 4913.4 | Effective temperature from DOPPLER [K] |
| E_TEFF_D | 95.7 | Error in effective temperature from DOPPLER [K] |
| LOGG_D | 2.422 | Surface gravity from DOPPLER |
| E_LOGG_D | 0.22 | Error in surface gravity from DOPPLER |
| FEH_D | 0.487 | Metallicity from DOPPLER |
| E_FEH_D | 0.038 | Error in metallicity from DOPPLER |
| CRVAL | 4.179 | Log(10) wavelength of first pixel [Angstrom] |
| CDELT | 6e-06 | Log(10) delta wavelength per pixel [Angstrom] |
| CTYPE | LOG-LINEAR | Wavelength solution description |
| CUNIT | Angstrom (Vacuum) | Wavelength solution unit |
| CRPIX | 1 | Pixel offset from the first pixel |
| DC-FLAG | 1 | Wavelength solution flag |
| NPIXELS | 8575 | Number of pixels per spectrum |
| TDIM2 | (8575) |  |
| TDIM3 | (8575) |  |
| TDIM4 | (8575) |  |
| CHECKSUM | 9AnTG6lS9AlSG3lS | HDU checksum updated 2022-10-17T22:32:45 |
| DATASUM | 2215063837 | data unit checksum updated 2022-10-17T22:32:45 |

##### Binary Table Caption for HDU3
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | SNR | float32 |  | Mean signal-to-noise ratio |
 | FLUX | float32[8575] |  | Source flux |
 | E_FLUX | float32[8575] |  | Standard deviation of source flux |
 | BITMASK | int64[8575] |  | Pixel-level bitmask (see documentation) |
 | RELEASE | char[5] |  | SDSS data release name |
 | FILETYPE | char[7] |  | SDSS data model filetype |
 | MJD | int32 |  | Modified Julian Date of the observations |
 | APRED | char[5] |  | APOGEE reduction tag |
 | FIBER | int32 |  | Fiber number |
 | FIELD | char[6] |  | Field number |
 | PLATE | char[4] |  | Plate number |
 | TELESCOPE | char[6] |  | Telescope name |
 | DATE-OBS | char[23] |  | Observation date (UTC) |
 | EXPTIME | float32 | s | Total exposure time  |
 | FLUXFLAM | float32 | ergs/s/cm^2/A | ADU to flux conversion factor  |
 | NPAIRS | int32 |  | Number of dither pairs combined |
 | DITHERED | float32 |  | Fraction of visits that were dithered |
 | JD | float32 |  | Julian date at mid-point of visit |
 | V_RAD | float32 |  | Radial velocity in Solar barycentric rest frame |
 | E_V_RAD | float32 | km/s | Error in radial velocity  |
 | V_REL | float32 | km/s | Relative velocity  |
 | V_BC | float32 | km/s | Solar barycentric velocity applied  |
 | RCHISQ | float32 |  | Reduced \chi-squared of model fit |
 | V_RAD_XCORR | float32 |  | Radial velocity in Solar barycentric rest frame |
 | V_REL_XCORR | float32 | km/s | Relative velocity from XCORR  |
 | E_V_RAD_XCORR | float32 | km/s | Error in relative velocity from XCORR  |
 | N_RV_COMPONENTS | int32 |  | Number of detected RV components |
 | V_SHIFT | float32 | km/s | Relative velocity shift used in stack  |
 | STARFLAG | int64 |  | APOGEE DRP quality bit mask |
 | IN_STACK | bool |  | Was this spectrum used in the stack? |
 | VISIT_PK | int32 |  | Primary key in `apogee_drp.visit` table |
 | RV_VISIT_PK | int32 |  | Primary key in `apogee_drp.rv_visit` table |
 | DATA_PRODUCT_ID | int32 |  | Astra data product identifier |



### HDU4: APOGEE/LCO
Spectra from the APOGEE instrument at Las Campanas Observatory.

#### HDU Type: BINARY TABLE
#### HDU Size:  0 bytes

##### Header Table Caption for HDU4
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | binary table extension |
| BITPIX | 8 | array data type |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 0 | length of dimension 1 |
| NAXIS2 | 0 | length of dimension 2 |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| TFIELDS | 0 | number of table fields |
| EXTNAME | APOGEE/LCO |  |
| OBSRVTRY | LCO |  |
| INSTRMNT | APOGEE |  |
| CHECKSUM | IqnVLnnTInnTInnT | HDU checksum updated 2022-10-17T22:32:45 |
| DATASUM | 0 | data unit checksum updated 2022-10-17T22:32:45 |
| COMMENT | No APOGEE data available from LCO for this source. |  |

##### Binary Table Caption for HDU4
Name | Type | Unit | Description |
| --- | --- | --- | --- |



---
## Notes
None