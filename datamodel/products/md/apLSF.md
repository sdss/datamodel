# Data Model: apLSF


apLSF contains calibration data characterizing the LSFs of each fiber.


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDUS List](#example-hdus-list)
- [Notes](#notes)
- [Regrets](#regrets)
---

## Basic Information
apLSF contains calibration data characterizing the LSFs of each fiber. It is derived from observations of emission line sources.

### Naming Convention
$APOGEE_REDUX/[APRED]/cal/[INSTRUMENT]/lsf/apLSF-[CHIP]-[NUM8].fits

### Releases
DR19, WORK

### Enviroments
APOGEE_REDUX

### Approximate Size
53 MB

### File Type
FITS

### Generated by Product
apogee_drp

### Is a VAC
False

### HDUS List for release WORK
  - [HDU0: PRIMARY](#hdu0-primary)
  - [HDU1](#hdu1)

---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another
 - WORK
   - from: DR19
   - note: No changes

---
## Example HDUS List

### HDU0: PRIMARY


#### HDU Type: IMAGE
#### HDU Size:  30 KB

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | image conforms to FITS standard |
| BITPIX | -32 | bits per data value |
| NAXIS | 2 | number of axes |
| NAXIS1 | 300 |  |
| NAXIS2 | 26 |  |
| EXTEND | True | file may contain extensions |
| INTDELAY | 0.1 | Integration Delay(S) |
| DATE-OBS | 2014-12-31T01:48:35.278 | Date at start of integration |
| TIMESYS | UTC | Time Zone of Date |
| NFRAMES | 14 | Num of SUTR/Fow reads |
| INTOFF | 10647 | Single read duration in mSec |
| EXPTIME | 149.158 | Actual Integration Time |
| FILENAME | /data-ql/data/57022/apRaw-14600018-001.fits | Fits file name root |
| IMAGETYP | Object | Object type for EXP |
| FULLX | 8192 | Camera Full Frame X DIM |
| FULLY | 2048 | Camera Full Frame X DIM |
| BEGX | 1 | IRAF 1-indexed Value |
| BEGY | 1 | IRAF 1-indexed Value |
| BINX | 1 | in pixels |
| BINY | 1 | in pixels |
| ACAMREV | UVA-Astrocam v1.2r55 | Camera Software revision |
| OBSCMNT | sky flat, offset 0.01 degree in RA | Observer comment |
| LKSHPWR | 0.0 | LS-PWR1-% |
| TDETTOP | 74.32 | T_DETPOLE_TOP in Degrees K |
| TDETBASE | 74.396 | T_DETPOLE_BASE in Degrees K |
| COLPITCH | 0.0 | Collimator Pitch(pix) |
| TTENTTOP | 83.167 | T_TENT_TOP in Degrees K |
| COLLM3 | 0.0 | Collimator M3(um) |
| TCLDPMID | 77.695 | T_CP_MIDDLE in Degrees K |
| COLLM2 | 0.0 | Collimator M2(um) |
| COLLM1 | 0.0 | Collimator M1(um) |
| TGETTER | 75.982 | T_GETTER in Degrees K |
| TTLMBRD | 298.876 | T_TempBrd in Degrees K |
| TLSOUTH | 76.003 | T_L_SOUTH in Degrees K |
| TLNORTH | 76.582 | T_L_NORTH in Degrees K |
| TLSCAM2 | 78.93 | T_LS-Camera2 in Degrees K |
| TLSCAM1 | 78.914 | T_LS-Camera1 in Degrees K |
| TLSDETC | 74.783 | T_LS-DetectorC in Degrees K |
| TLSDETB | 73.82 | T_LS-DetectorB in Degrees K |
| TPGVAC | 4.21e-07 | Pfeiffer-Vacuum in Torr |
| LN2CNTRL | 0.0 | LN2(%) |
| TCAMAFT | 77.721 | T_CAM_AFT in Degrees K |
| TCAMMID | 78.458 | T_CAM_MIDDLE in Degrees K |
| COLLYAW | 0.0 | Collimator Yaw(pix) |
| TCAMFWD | 78.488 | T_CAM_FWD in Degrees K |
| TEMPVPH | 77.879 | T_VPH in Degrees K |
| TRADSHLD | 88.756 | T_RADSHIELD_E in Degrees K |
| TCOLLIM | 78.598 | T_COLLIMATOR in Degrees K |
| TCPCORN | 79.705 | T_CP_CORNER in Degrees K |
| TCLDPHNG | 79.148 | T_CP_HANGERS in Degrees K |
| COLLPIST | 0.0 | Collimator Piston(um) |
| DITHPIX | 12.994 | Dither Position(pix) |
| RELHUM | 9.336 | RH_T(%) |
| LN2LEVEL | 92.196 | LN2_T(%) |
| MKSVAC | 1e-08 | MKS-Vacuum in Torr |
| OBJECT | ObjName |  |
| FILTER1 | FILTER |  |
| ICSREV | APOGEE ICS2.0r033 |  |
| DSPFILE | UNKNOWN |  |
| TELESCOP | SDSS 2-5m |  |
| EXPTYPE | OBJECT |  |
| LAMPQRTZ | 0 | CalBox Quartz Lamp Status |
| LAMPUNE | 0 | CalBox UNe Lamp Status |
| LAMPTHAR | 0 | CalBox ThArNe Lamp Status |
| LAMPSHTR | 0 | CalBox Shutter Lamp Status |
| LAMPCNTL | 1 | CalBox Controller Status |
| SEEING | 2.78806 | RMS seeing from guide fibers |
| FF | 0 0 0 0 | FF lamps 1:on 0:0ff |
| NE | 0 0 0 0 | NE lamps 1:on 0:0ff |
| HGCD | 0 0 0 0 | HGCD lamps 1:on 0:0ff |
| FFS | 0 0 0 0 0 0 0 0 | Flatfield Screen 1:closed 0:open |
| OBJSYS | ICRS | The TCC objSys |
| RA | 11.403234 | RA of telescope boresight (deg) |
| DEC | 2.840861 | Dec of telescope boresight (deg) |
| RADEG | 11.3922 | RA of telescope pointing(deg) |
| DECDEG | 2.8383 | Dec of telescope pointing (deg) |
| SPA | -15.07057555338478 | TCC SpiderInstAng |
| ROTPOS | 0.0 | Rotator request position (deg) |
| BOREOFFX | 0.0 | TCC Boresight offset, deg |
| BOREOFFY | 0.0 | TCC Boresight offset, deg |
| ARCOFFX | 0.01102 | TCC ObjArcOff, deg |
| ARCOFFY | 0.002561 | TCC ObjArcOff, deg |
| OBJOFFX | 0.0 | TCC ObjOff, deg |
| OBJOFFY | 0.0 | TCC ObjOff, deg |
| CALOFFX | 0.0 | TCC CalibOff, deg |
| CALOFFY | 0.0 | TCC CalibOff, deg |
| CALOFFR | 0.0 | TCC CalibOff, deg |
| GUIDOFFX | 0.0 | TCC GuideOff, deg |
| GUIDOFFY | 0.0 | TCC GuideOff, deg |
| GUIDOFFR | 0.036058 | TCC GuideOff, deg |
| AZ | -17.736 | Azimuth axis pos. (approx, deg) |
| ALT | 58.992 | Altitude axis pos. (approx, deg) |
| IPA | 165.169 | Rotator axis pos. (approx, deg) |
| FOCUS | 523.89 | User-specified focus offset (um) |
| M2PISTON | 3063.22 | TCC SecOrient |
| M2XTILT | -3.8 | TCC SecOrient |
| M2YTILT | 0.0 | TCC SecOrient |
| M2XTRAN | 0.0 | TCC SecOrient |
| M2YTRAN | -122.36 | TCC SecOrient |
| M1PISTON | 1672.4 | TCC PrimOrient |
| M1XTILT | 0.0 | TCC PrimOrient |
| M1YTILT | 0.0 | TCC PrimOrient |
| M1XTRAN | 650.6 | TCC PrimOrient |
| M1YTRAN | 936.54 | TCC PrimOrient |
| SCALE | 0.999831 | User-specified scale factor |
| NAME | 7771-57022-01 | The name of the currently loaded plate |
| PLATEID | 7771 | The currently loaded plate |
| CARTID | 9 | The currently loaded cartridge |
| MAPID | 1 | The mapping version of the loaded plate |
| POINTING | A | The currently specified pointing |
| PLATETYP | APOGEE-2 | Type of plate (e.g. BOSS, MANGA, APOGEE, APOGEE |
| SRVYMODE | None | Survey leading this observation and its mode |
| CHIP | a |  |
| NREAD | 14 |  |
| V_APRED | 0.17.15 |  |
| HISTORY | AP3D: Thu Jan 28 05:56:43 2021 |  |
| HISTORY | AP3D: u0914351 on kp119 |  |
| HISTORY | AP3D: IDL 8.4 linux x86_64 |  |
| HISTORY | AP3D:  APOGEE Reduction Pipeline Version: 0.17.15 |  |
| HISTORY | AP3D: Output File: |  |
| HISTORY | AP3D:  HDU1 - image (ADU) |  |
| HISTORY | AP3D:  HDU2 - error (ADU) |  |
| HISTORY | AP3D:  HDU3 - flag mask |  |
| HISTORY | AP3D:         1 - bad pixels |  |
| HISTORY | AP3D:         2 - cosmic ray |  |
| HISTORY | AP3D:         4 - saturated |  |
| HISTORY | AP3D:         8 - unfixable |  |
| HISTORY | AP3D: Global fractional variability = 0.196 |  |
| HISTORY | AP3D: BAD PIXEL MASK file="/uufs/chpc.utah.edu/common/home/sdss/apogeewo |  |
| HISTORY | AP3D: rk/apogee/spectro/redux/dr17/cal/bpm/apBPM-a-23890001.fits" |  |
| HISTORY | AP3D: Dark Current Correction file="/uufs/chpc.utah.edu/common/home/sdss |  |
| HISTORY | AP3D: /apogeework/apogee/spectro/redux/dr17/cal/darkcorr/apDark-a-238900 |  |
| HISTORY | AP3D: Flat Field Correction file="/uufs/chpc.utah.edu/common/home/sdss/a |  |
| HISTORY | AP3D: pogeework/apogee/spectro/redux/dr17/cal/flatcorr/apFlat-a-13360054 |  |
| HISTORY | AP3D: 74241 pixels are bad |  |
| HISTORY | AP3D: 157 pixels have cosmic rays |  |
| HISTORY | AP3D: Cosmic Rays FIXED |  |
| HISTORY | AP3D: 33 pixels are saturated |  |
| HISTORY | AP3D: 33 saturated pixels FIXED |  |
| HISTORY | AP3D: 0 pixels are unfixable |  |
| HISTORY | AP3D: UP-THE-RAMP Sampling |  |
| UT-MID | 2014-12-31T01:49:49.9 | Date at midpoint of exposure |
| JD-MID | 2457022.57627 | JD at midpoint of exposure |
| PSFFILE | /uufs/chpc.utah.edu/common/home/sdss/apogeework/apogee/spectro/redux |  |
| HISTORY | AP2D: Thu Jan 28 05:59:25 2021 |  |
| HISTORY | AP2D: u0914351 on kp119 |  |
| HISTORY | AP2D: IDL 8.4 linux x86_64 |  |
| HISTORY | AP2D:  APOGEE Reduction Pipeline Version: 0.17.15 |  |
| HISTORY | AP2D: Output File: |  |
| HISTORY | AP2D:  HDU1 - image (ADU) |  |
| HISTORY | AP2D:  HDU2 - error (ADU) |  |
| HISTORY | AP2D:  HDU3 - flag mask |  |
| HISTORY | AP2D:         0 - good pixels |  |
| HISTORY | AP2D:         1 - bad pixels |  |
| HISTORY | AP2D:  HDU4 - wavelengths (Ang) |  |
| HISTORY | AP2D:  HDU5 - wavelength coefficients |  |
| HISTORY | AP2D: Extract_type=4 - Using Empirical PSF Extraction |  |
| HISTORY | Added wavelengths from SKYCAL, waveid: 13140000 |  |
| HISTORY | Wavelength shift parameters -4.69720e-05   -3.261   -3.220   -3.190 |  |
| EXTRTYPE | 4 | Extraction type |
| WAVEFILE | /uufs/chpc.utah.edu/common/home/sdss/apogeework/apogee/spectro/redux/dr17/cal/wave/apWave-13140000.fits |  |
| WAVEHDU | 5 |  |
| LAMPTYPE | SKY |  |
| LSFMETHD | 2 | Fitting method: 1-single, 2-chips, 3-all |
| HISTORY |  |  |
| HISTORY | LSF parameters from APLSF: |  |
| HISTORY | The Y-units are in dither combined pixels (starting with 0) |  |
| HISTORY | There are LSF parameters for each fiber [Nfibers,Npars] |  |
| HISTORY | The parameters are: |  |
| HISTORY |  1: Binsize - The width of one pixel |  |
| HISTORY |  2: Yoffset - The offset to apply to Y |  |
| HISTORY |  3: Horder - The highest Hermite order.  We fix H0=1 |  |
| HISTORY |  4->Horder+4: Porder - The polynomial order for the global variation |  |
| HISTORY |                      with Y for Sigma and the Horder Hermite parameters |  |
| HISTORY |                      There are Porder[i]+1 coefficients for parameter i |  |
| HISTORY |  Horder+5->Horder+4+SUM(Porder+1): GHcoefs - The polynomial coefficients |  |
| HISTORY |                        for Sigma and the Horder Hermite paramters |  |
| HISTORY | The LSF parameters are to be used with the LSF_GH.PRO function |  |
| HISTORY | For example, if you want the LSF at position Y=250 for fiber 10, |  |
| HISTORY |  IDL>fits_read,'apLsf-a-5529.fits',lsfim  ; load the parameters |  |
| HISTORY |  IDL>pars = lsfim[9,*]                    ; parameters for fiber 10 |  |
| HISTORY |  IDL>y = findgen(21)-10 + 250             ; create pixel array |  |
| HISTORY |  IDL>lsf = lsf_gh(y,250,pars)             ; get the LSF |  |
| HISTORY |  |  |
| HISTORY | LAMPTYPE = SKY |  |
| HISTORY | LSF Fitting Method = 2 |  |
| HISTORY | 1-every line fit separately |  |
| HISTORY | 2-all lines per chip/fiber fit together |  |
| HISTORY | 3-all lines per fiber (all three chips) fir together |  |



### HDU1: 


#### HDU Type: IMAGE
#### HDU Size:  53 MB

##### Header Table Caption for HDU1
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | Image Extension created by MWRFITS v1.13 |
| SIMPLE | True | Written by IDL:  Thu Jan 28 06:30:55 2021 |
| BITPIX | -32 | Number of bits per data pixel |
| NAXIS | 3 | Number of data axes |
| NAXIS1 | 2048 |  |
| NAXIS2 | 300 |  |
| NAXIS3 | 23 |  |
| DATE | 2021-01-28 | Creation UTC (CCCC-MM-DD) date of FITS header |
| COMMENT | FITS (Flexible Image Transport System) format is defined in 'Astronomy |  |
| COMMENT | and Astrophysics', volume 376, page 359; bibcode 2001A&A...376..359H |  |
| CTYPE1 | Pixels |  |
| CRPIX1 | 1 |  |
| CRVAL1 | 1 |  |
| CDELT1 | 1 |  |
| CTYPE2 | Fibers |  |
| CRPIX2 | 1 |  |
| CRVAL2 | 1 |  |
| CDELT2 | 1 |  |
| CTYPE3 | LSF pixels |  |
| CRPIX3 | 1 |  |
| CRVAL3 | -11 |  |
| CDELT3 | 1 |  |
| PCOUNT | 0 |  |
| GCOUNT | 1 |  |
| HISTORY |  |  |
| HISTORY | LSFs from APLSF: |  |
| HISTORY | The LSFs are normalized and are by default to be used with dither |  |
| HISTORY |   combined pixels. There is an LSF for each fiber and pixel. |  |
| HISTORY | The array is [Npix, Nfibers, Nlsfpix].  There are pixels to cover |  |
| HISTORY | approximately +/-5 sigma => 23 pixels. |  |



---
## Notes
None

---
## Regrets
I have no regrets!