# Data Model: apLSF


migration: needs update


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDU List](#example-hdu-list)


---

## Basic Information
apLSF contains calibration data characterizing the LSFs of each fiber. It is derived from
observations of emission line sources.

### Naming Convention
apLSF-[abc]-MJD5.fits

### Releases
DR10, DR12, DR11, DR13, DR14, DR15, DR16, WORK

### Enviroments
APOGEE_REDUX

### Approximate Size
58 MB

### File Type
FITS

### Generated by Product
migration: not in database. Needs update

### HDU List for release WORK
  - [HDU0: PRIMARY](#hdu0-primary)
  - [HDU1: ](#hdu1-)


---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another
 - WORK
   - from: DR16
   - note: No changes
 - DR16
   - from: DR15
   - primary_delta_nkeys: 4
 - DR15
   - from: DR14
   - note: No changes
 - DR14
   - from: DR13
   - primary_delta_nkeys: 4
 - DR13
   - from: DR11
   - primary_delta_nkeys: 1
   - removed_primary_header_kwargs: ['CHECKSUM']
 - DR11
   - from: DR12
   - primary_delta_nkeys: 4
 - DR12
   - from: DR10
   - primary_delta_nkeys: 4

---
## Example HDU List


### HDU0: PRIMARY
<b>
Example header:
</b>

#### HDU Type: IMAGE
#### HDU Size:  30 KB

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | conforms to FITS standard |
| BITPIX | -32 | array data type |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 300 | length of dimension 1 |
| NAXIS2 | 26 | length of dimension 2 |
| EXTEND | True |  |
| INTDELAY | 0.1 | migration: description of keyword/column not found. Needs update |
| DATE-OBS | 2011-12-10T01:50:58.352 | migration: description of keyword/column not found. Needs update |
| TIMESYS | UTC | migration: description of keyword/column not found. Needs update |
| NFRAMES | 14 | migration: description of keyword/column not found. Needs update |
| INTOFF | 10647 | migration: description of keyword/column not found. Needs update |
| EXPTIME | 149.158 | migration: description of keyword/column not found. Needs update |
| FILENAME | /data-ql/data/55905/apRaw-03430016-001.fits | migration: description of keyword/column not found. Needs update |
| IMAGETYP | Object | migration: description of keyword/column not found. Needs update |
| FULLX | 8192 | migration: description of keyword/column not found. Needs update |
| FULLY | 2048 | migration: description of keyword/column not found. Needs update |
| BEGX | 1 | migration: description of keyword/column not found. Needs update |
| BEGY | 1 | migration: description of keyword/column not found. Needs update |
| BINX | 1 | migration: description of keyword/column not found. Needs update |
| BINY | 1 | migration: description of keyword/column not found. Needs update |
| ACAMREV | UVA-Astrocam v1.2r55 | migration: description of keyword/column not found. Needs update |
| OBSCMNT | sky flat, offset 0.01 degree in RA | migration: description of keyword/column not found. Needs update |
| LKSHPWR | 0.0 | migration: description of keyword/column not found. Needs update |
| TDETTOP | 74.678 | migration: description of keyword/column not found. Needs update |
| TDETBASE | 74.719 | migration: description of keyword/column not found. Needs update |
| COLPITCH | 5.817 | migration: description of keyword/column not found. Needs update |
| TTENTTOP | 83.47 | migration: description of keyword/column not found. Needs update |
| COLLM3 | 2377.976 | migration: description of keyword/column not found. Needs update |
| TCLDPMID | 78.366 | migration: description of keyword/column not found. Needs update |
| COLLM2 | 2354.858 | migration: description of keyword/column not found. Needs update |
| COLLM1 | 2494.161 | migration: description of keyword/column not found. Needs update |
| TGETTER | 76.114 | migration: description of keyword/column not found. Needs update |
| TTLMBRD | 300.901 | migration: description of keyword/column not found. Needs update |
| TLSOUTH | 76.316 | migration: description of keyword/column not found. Needs update |
| TLNORTH | 77.331 | migration: description of keyword/column not found. Needs update |
| TLSCAM2 | 78.969 | migration: description of keyword/column not found. Needs update |
| TLSCAM1 | 78.956 | migration: description of keyword/column not found. Needs update |
| TLSDETC | 74.809 | migration: description of keyword/column not found. Needs update |
| TLSDETB | 73.846 | migration: description of keyword/column not found. Needs update |
| TPGVAC | 4.72e-07 | migration: description of keyword/column not found. Needs update |
| LN2CNTRL | 0.0 | migration: description of keyword/column not found. Needs update |
| TCAMAFT | 77.345 | migration: description of keyword/column not found. Needs update |
| TCAMMID | 78.136 | migration: description of keyword/column not found. Needs update |
| COLLYAW | 17.413 | migration: description of keyword/column not found. Needs update |
| TCAMFWD | 79.106 | migration: description of keyword/column not found. Needs update |
| TEMPVPH | 78.292 | migration: description of keyword/column not found. Needs update |
| TRADSHLD | 87.791 | migration: description of keyword/column not found. Needs update |
| TCOLLIM | 78.336 | migration: description of keyword/column not found. Needs update |
| TCPCORN | 80.178 | migration: description of keyword/column not found. Needs update |
| TCLDPHNG | 79.898 | migration: description of keyword/column not found. Needs update |
| COLLPIST | 2401.243 | migration: description of keyword/column not found. Needs update |
| DITHPIX | 12.994 | migration: description of keyword/column not found. Needs update |
| RELHUM | 10.115 | migration: description of keyword/column not found. Needs update |
| LN2LEVEL | 93.505 | migration: description of keyword/column not found. Needs update |
| MKSVAC | 4.74e-07 | migration: description of keyword/column not found. Needs update |
| OBJECT | ObjName | migration: description of keyword/column not found. Needs update |
| FILTER1 | FILTER | migration: description of keyword/column not found. Needs update |
| ICSREV | APOGEE ICS2.0r033 | migration: description of keyword/column not found. Needs update |
| DSPFILE | UNKNOWN | migration: description of keyword/column not found. Needs update |
| TELESCOP | SDSS 2-5m | migration: description of keyword/column not found. Needs update |
| EXPTYPE | OBJECT | migration: description of keyword/column not found. Needs update |
| LAMPQRTZ | 0 | migration: description of keyword/column not found. Needs update |
| LAMPUNE | 0 | migration: description of keyword/column not found. Needs update |
| LAMPTHAR | 0 | migration: description of keyword/column not found. Needs update |
| LAMPSHTR | 0 | migration: description of keyword/column not found. Needs update |
| LAMPCNTL | 1 | migration: description of keyword/column not found. Needs update |
| SEEING | 1.46883 | migration: description of keyword/column not found. Needs update |
| FF | 0 0 0 0 | migration: description of keyword/column not found. Needs update |
| NE | 0 0 0 0 | migration: description of keyword/column not found. Needs update |
| HGCD | 0 0 0 0 | migration: description of keyword/column not found. Needs update |
| FFS | 0 0 0 0 0 0 0 0 | migration: description of keyword/column not found. Needs update |
| OBJSYS | ICRS | migration: description of keyword/column not found. Needs update |
| RA | 356.297367 | migration: description of keyword/column not found. Needs update |
| DEC | 66.009982 | migration: description of keyword/column not found. Needs update |
| RADEG | 356.273 | migration: description of keyword/column not found. Needs update |
| DECDEG | 66.0073 | migration: description of keyword/column not found. Needs update |
| ROTPOS | 0.0 | migration: description of keyword/column not found. Needs update |
| BOREOFFX | 0.0 | migration: description of keyword/column not found. Needs update |
| BOREOFFY | 0.0 | migration: description of keyword/column not found. Needs update |
| ARCOFFX | 0.009907 | migration: description of keyword/column not found. Needs update |
| ARCOFFY | 0.002684 | migration: description of keyword/column not found. Needs update |
| OBJOFFX | 0.0 | migration: description of keyword/column not found. Needs update |
| OBJOFFY | 0.0 | migration: description of keyword/column not found. Needs update |
| CALOFFX | -0.000141 | migration: description of keyword/column not found. Needs update |
| CALOFFY | 0.002673 | migration: description of keyword/column not found. Needs update |
| CALOFFR | 0.0 | migration: description of keyword/column not found. Needs update |
| GUIDOFFX | 0.0 | migration: description of keyword/column not found. Needs update |
| GUIDOFFY | 0.0 | migration: description of keyword/column not found. Needs update |
| GUIDOFFR | -0.011884 | migration: description of keyword/column not found. Needs update |
| AZ | 182.775 | migration: description of keyword/column not found. Needs update |
| ALT | 56.648 | migration: description of keyword/column not found. Needs update |
| IPA | 5.775 | migration: description of keyword/column not found. Needs update |
| SPA | -173.8927675142059 | migration: description of keyword/column not found. Needs update |
| FOCUS | 473.68 | migration: description of keyword/column not found. Needs update |
| M2PISTON | 1243.6 | migration: description of keyword/column not found. Needs update |
| M2XTILT | 13.01 | migration: description of keyword/column not found. Needs update |
| M2YTILT | 8.04 | migration: description of keyword/column not found. Needs update |
| M2XTRAN | -60.52 | migration: description of keyword/column not found. Needs update |
| M2YTRAN | 25.04 | migration: description of keyword/column not found. Needs update |
| M1PISTON | -471.46 | migration: description of keyword/column not found. Needs update |
| M1XTILT | 0.0 | migration: description of keyword/column not found. Needs update |
| M1YTILT | 0.0 | migration: description of keyword/column not found. Needs update |
| M1XTRAN | 612.27 | migration: description of keyword/column not found. Needs update |
| M1YTRAN | 1325.18 | migration: description of keyword/column not found. Needs update |
| SCALE | 1.000048 | migration: description of keyword/column not found. Needs update |
| NAME | 5582-55905-01 | migration: description of keyword/column not found. Needs update |
| PLATEID | 5582 | migration: description of keyword/column not found. Needs update |
| CARTID | 6 | migration: description of keyword/column not found. Needs update |
| MAPID | 1 | migration: description of keyword/column not found. Needs update |
| POINTING | A | migration: description of keyword/column not found. Needs update |
| CHIP | a | migration: description of keyword/column not found. Needs update |
| NREAD | 14 | migration: description of keyword/column not found. Needs update |
| V_APRED | 0.17.15 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Thu Jan 28 05:56:09 2021 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: u0914351 on kp119 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: IDL 8.4 linux x86_64 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:  APOGEE Reduction Pipeline Version: 0.17.15 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Output File: | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:  HDU1 - image (ADU) | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:  HDU2 - error (ADU) | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:  HDU3 - flag mask | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:         1 - bad pixels | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:         2 - cosmic ray | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:         4 - saturated | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:         8 - unfixable | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Global fractional variability = 0.199 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: BAD PIXEL MASK file="/uufs/chpc.utah.edu/common/home/sdss/apogeewo | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: rk/apogee/spectro/redux/dr17/cal/bpm/apBPM-a-12910009.fits" | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Dark Current Correction file="/uufs/chpc.utah.edu/common/home/sdss | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: /apogeework/apogee/spectro/redux/dr17/cal/darkcorr/apDark-a-129100 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Flat Field Correction file="/uufs/chpc.utah.edu/common/home/sdss/a | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: pogeework/apogee/spectro/redux/dr17/cal/flatcorr/apFlat-a-04750009 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: 75667 pixels are bad | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: 180 pixels have cosmic rays | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Cosmic Rays FIXED | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: 28 pixels are saturated | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: 28 saturated pixels FIXED | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: 0 pixels are unfixable | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: UP-THE-RAMP Sampling | migration: description of keyword/column not found. Needs update |
| UT-MID | 2011-12-10T01:52:12.9 | migration: description of keyword/column not found. Needs update |
| JD-MID | 2455905.57793 | migration: description of keyword/column not found. Needs update |
| PSFFILE | /uufs/chpc.utah.edu/common/home/sdss/apogeework/apogee/spectro/redux | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D: Thu Jan 28 05:58:16 2021 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D: u0914351 on kp119 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D: IDL 8.4 linux x86_64 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D:  APOGEE Reduction Pipeline Version: 0.17.15 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D: Output File: | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D:  HDU1 - image (ADU) | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D:  HDU2 - error (ADU) | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D:  HDU3 - flag mask | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D:         0 - good pixels | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D:         1 - bad pixels | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D:  HDU4 - wavelengths (Ang) | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D:  HDU5 - wavelength coefficients | migration: description of keyword/column not found. Needs update |
| HISTORY | AP2D: Extract_type=4 - Using Empirical PSF Extraction | migration: description of keyword/column not found. Needs update |
| HISTORY | Added wavelengths from SKYCAL, waveid: 02380000 | migration: description of keyword/column not found. Needs update |
| HISTORY | Wavelength shift parameters -1.18100e-04   -0.055   -0.041   -0.036 | migration: description of keyword/column not found. Needs update |
| EXTRTYPE | 4 | migration: description of keyword/column not found. Needs update |
| WAVEFILE | /uufs/chpc.utah.edu/common/home/sdss/apogeework/apogee/spectro/redux/dr17/cal/wave/apWave-02380000.fits | migration: description of keyword/column not found. Needs update |
| WAVEHDU | 5 | migration: description of keyword/column not found. Needs update |
| LAMPTYPE | SKY | migration: description of keyword/column not found. Needs update |
| LSFMETHD | 2 | migration: description of keyword/column not found. Needs update |
| HISTORY |  | migration: description of keyword/column not found. Needs update |
| HISTORY | LSF parameters from APLSF: | migration: description of keyword/column not found. Needs update |
| HISTORY | The Y-units are in dither combined pixels (starting with 0) | migration: description of keyword/column not found. Needs update |
| HISTORY | There are LSF parameters for each fiber [Nfibers,Npars] | migration: description of keyword/column not found. Needs update |
| HISTORY | The parameters are: | migration: description of keyword/column not found. Needs update |
| HISTORY |  1: Binsize - The width of one pixel | migration: description of keyword/column not found. Needs update |
| HISTORY |  2: Yoffset - The offset to apply to Y | migration: description of keyword/column not found. Needs update |
| HISTORY |  3: Horder - The highest Hermite order.  We fix H0=1 | migration: description of keyword/column not found. Needs update |
| HISTORY |  4->Horder+4: Porder - The polynomial order for the global variation | migration: description of keyword/column not found. Needs update |
| HISTORY |                      with Y for Sigma and the Horder Hermite parameters | migration: description of keyword/column not found. Needs update |
| HISTORY |                      There are Porder[i]+1 coefficients for parameter i | migration: description of keyword/column not found. Needs update |
| HISTORY |  Horder+5->Horder+4+SUM(Porder+1): GHcoefs - The polynomial coefficients | migration: description of keyword/column not found. Needs update |
| HISTORY |                        for Sigma and the Horder Hermite paramters | migration: description of keyword/column not found. Needs update |
| HISTORY | The LSF parameters are to be used with the LSF_GH.PRO function | migration: description of keyword/column not found. Needs update |
| HISTORY | For example, if you want the LSF at position Y=250 for fiber 10, | migration: description of keyword/column not found. Needs update |
| HISTORY |  IDL>fits_read,'apLsf-a-5529.fits',lsfim  ; load the parameters | migration: description of keyword/column not found. Needs update |
| HISTORY |  IDL>pars = lsfim[9,*]                    ; parameters for fiber 10 | migration: description of keyword/column not found. Needs update |
| HISTORY |  IDL>y = findgen(21)-10 + 250             ; create pixel array | migration: description of keyword/column not found. Needs update |
| HISTORY |  IDL>lsf = lsf_gh(y,250,pars)             ; get the LSF | migration: description of keyword/column not found. Needs update |
| HISTORY |  | migration: description of keyword/column not found. Needs update |
| HISTORY | LAMPTYPE = SKY | migration: description of keyword/column not found. Needs update |
| HISTORY | LSF Fitting Method = 2 | migration: description of keyword/column not found. Needs update |
| HISTORY | 1-every line fit separately | migration: description of keyword/column not found. Needs update |
| HISTORY | 2-all lines per chip/fiber fit together | migration: description of keyword/column not found. Needs update |
| HISTORY | 3-all lines per fiber (all three chips) fir together | migration: description of keyword/column not found. Needs update |



### HDU1: 
<b>
Example header:
</b>

#### HDU Type: IMAGE
#### HDU Size:  58 MB

##### Header Table Caption for HDU1
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| SIMPLE | True | conforms to FITS standard |
| BITPIX | -32 | array data type |
| NAXIS | 3 | number of array dimensions |
| NAXIS1 | 2048 | length of dimension 1 |
| NAXIS2 | 300 | length of dimension 2 |
| NAXIS3 | 25 | migration: description of keyword/column not found. Needs update |
| DATE | 2021-01-28 | migration: description of keyword/column not found. Needs update |
| COMMENT | FITS (Flexible Image Transport System) format is defined in 'Astronomy | migration: description of keyword/column not found. Needs update |
| COMMENT | and Astrophysics', volume 376, page 359; bibcode 2001A&A...376..359H | migration: description of keyword/column not found. Needs update |
| CTYPE1 | Pixels | migration: description of keyword/column not found. Needs update |
| CRPIX1 | 1 | migration: description of keyword/column not found. Needs update |
| CRVAL1 | 1 | migration: description of keyword/column not found. Needs update |
| CDELT1 | 1 | migration: description of keyword/column not found. Needs update |
| CTYPE2 | Fibers | migration: description of keyword/column not found. Needs update |
| CRPIX2 | 1 | migration: description of keyword/column not found. Needs update |
| CRVAL2 | 1 | migration: description of keyword/column not found. Needs update |
| CDELT2 | 1 | migration: description of keyword/column not found. Needs update |
| CTYPE3 | LSF pixels | migration: description of keyword/column not found. Needs update |
| CRPIX3 | 1 | migration: description of keyword/column not found. Needs update |
| CRVAL3 | -12 | migration: description of keyword/column not found. Needs update |
| CDELT3 | 1 | migration: description of keyword/column not found. Needs update |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| HISTORY |  | migration: description of keyword/column not found. Needs update |
| HISTORY | LSFs from APLSF: | migration: description of keyword/column not found. Needs update |
| HISTORY | The LSFs are normalized and are by default to be used with dither | migration: description of keyword/column not found. Needs update |
| HISTORY |   combined pixels. There is an LSF for each fiber and pixel. | migration: description of keyword/column not found. Needs update |
| HISTORY | The array is [Npix, Nfibers, Nlsfpix].  There are pixels to cover | migration: description of keyword/column not found. Needs update |
| HISTORY | approximately +/-5 sigma => 25 pixels. | migration: description of keyword/column not found. Needs update |


