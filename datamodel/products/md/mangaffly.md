# Data Model: mangaffly


migrated from old datamodel - needs update


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDU List](#example-hdu-list)


---

## Basic Information
manga-firefly-v2_4_3.fits is the MaNGA FIREFLY catalogue for the the 15th data release of the Sloan Digital Sky Survey. The file contains analysis for 4675 galaxies from the MaNGA survey, providing stellar population parameters, gradients and absorption index measurements. For DR15, the version of FIREFLY used was FIREFLY_VER=v1_1_0, and this was run on MANGADRP_VER=v2_4_3 reduced data. Compared to the FIREFLY VAC in DR14, two extensions that decribe the mass of stellar remnants (HDU12: STELLAR MASS REMNAT) and star formation history (HDU14: STAR FORMATION HISTORY) are added in the new VAC in DR15. The catalogue is available in FITS format at the following link:
<dd>
<dd>
<a href="https://data.sdss.org/sas/dr15/manga/spectro/firefly/v1_1_2/manga_firefly-v2_4_3.fits" target="_blank">https://data.sdss.org/sas/dr15/manga/spectro/firefly/v1_1_2/manga_firefly-v2_4_3.fits</a>
</dd>
<dt>Naming Convention</dt>
<dd id="filename"><code> filename = manga_firefly-MANGADRP_VER.fits where MANGADRP_VER=v2_4_3 for DR15 </code>.</dd>
<dt>Approximate Size</dt>
<dd id="filesize">6 GB</dd>
<dt>File Type</dt>
<dd id="filetype">FITS</dd>
<dt>Read by Products</dt>
<dd>firefly</dd>
<dt>Written by Products</dt>
<dd>firefly</dd>
<dt>Sections</dt>
<dd><p>This should contain internal links to parts of the file (if any).</p>
<ul>
<li><a href="#hdu0">HDU0</a>: The Primary Header</li>
<li><a href="#hdu1">HDU1</a>: A Data Table</li>
<li><a href="#example">Examples</a></li>
</ul>
</dd>
</dd>

### Naming Convention
filename = manga_firefly-MANGADRP_VER.fits where MANGADRP_VER=v2_4_3 for DR15 .

### Releases
DR14, DR15, DR16, DR17

### Enviroments
MANGA_FIREFLY

### Approximate Size
4 GB

### File Type
FITS

### Generated by Product
firefly

### HDU List for release DR17
  - [HDU0: PRIMARY](#hdu0-primary)
  - [HDU1: GALAXY_INFO](#hdu1-galaxy_info)
  - [HDU2: GLOBAL_PARAMETERS](#hdu2-global_parameters)
  - [HDU3: GRADIENT_PARAMETERS](#hdu3-gradient_parameters)
  - [HDU4: SPATIAL_INFO](#hdu4-spatial_info)
  - [HDU5: SPATIAL_BINID](#hdu5-spatial_binid)
  - [HDU6: LW_AGE_VORONOI](#hdu6-lw_age_voronoi)
  - [HDU7: MW_AGE_VORONOI](#hdu7-mw_age_voronoi)
  - [HDU8: LW_Z_VORONOI](#hdu8-lw_z_voronoi)
  - [HDU9: MW_Z_VORONOI](#hdu9-mw_z_voronoi)
  - [HDU10: E(B_V)_VORONOI](#hdu10-e(b_v)_voronoi)
  - [HDU11: STELLAR_MASS_VORONOI](#hdu11-stellar_mass_voronoi)
  - [HDU12: STELLAR_MASS_REMNANT](#hdu12-stellar_mass_remnant)
  - [HDU13: SURFACE_MASS_DENSITY_VORONOI](#hdu13-surface_mass_density_voronoi)
  - [HDU14: STAR_FORMATION_HISTORY](#hdu14-star_formation_history)
  - [HDU15: SIGNAL_NOISE_VORONOI](#hdu15-signal_noise_voronoi)


---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another
 - DR17
   - from: DR16
   - removed_hdus: ['FE5015_INDEX', 'FE4531_INDEX', 'FE5335_INDEX', 'TIO1_INDEX', 'HGAMMA_F_INDEX', 'NAD_INDEX', 'H_BETA_INDEX', 'FE5270_INDEX', 'HDELTA_A_INDEX', 'FE4383_INDEX', 'CAHK_INDEX', 'D4000_INDEX', 'CN2_INDEX', 'CA4227_INDEX', 'CN1_INDEX', 'HDELTA_F_INDEX', 'CA4455_INDEX', 'TIO2_INDEX', 'FE5782_INDEX', 'FE5709_INDEX', 'FE5406_INDEX', 'MG1_INDEX', 'MG2_INDEX', 'C24668_INDEX', 'HGAMMA_A_INDEX', 'MGB_INDEX', 'G4300_INDEX', 'DN4000_INDEX']
 - DR16
   - from: DR15
   - note: No changes
 - DR15
   - from: DR14
   - added_hdus: ['SPATIAL_BINID', 'STAR_FORMATION_HISTORY', 'STELLAR_MASS_REMNANT']
   - removed_hdus: ['SPAXEL_BINID']

---
## Example HDU List


### HDU0: PRIMARY
This section should contain any information related to the primary
header. Keywords are listed in the table below.  There are three types
of values for keywords:
Explicit Values
<br/>
The keyword <em>must</em> be present and <em>must</em> have the value given in the table.
Allowed Values
<br/>
The keyword <em>must</em> be present and <em>must</em> conform to the regular expression given in the table. That is, the keyword may have a range of possible values.
Checked Values
<br/>
The keyword <em>must</em> be present but may have any value as long as it is the correct type.
If a keyword might not be present in a FITS file, it should not be listed in
this table, but a note should be made in the datamodel file.
This HDU has no non-standard required keywords.

#### HDU Type: IMAGE
#### HDU Size:  0 bytes

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | conforms to FITS standard |
| BITPIX | 8 | array data type |
| NAXIS | 0 | number of array dimensions |
| EXTEND | True |  |



### HDU1: GALAXY_INFO
This HDU contains basic information for each of the MaNGA galaxies.

#### HDU Type: BINARY TABLE
#### HDU Size:  1 MB

##### Binary Table Caption for HDU1
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | MANGAID | char[20] | N/A | Unique MaNGA Identifier. |
 | PLATEIFU | char[20] | N/A | Unique string containing MaNGA plate and Ifu. |
 | PLATE | int16[INT1] | N/A | Plate which Galaxy was observed with. |
 | IFUDSGN | char[20] | N/A | IFU which Galaxy was observed with. |
 | OBJRA | float32 | N/A | Right Ascension of Galaxy. |
 | OBJDEC | float32 | N/A | Declination of Galaxy. |
 | REDSHIFT | float32 | N/A | Redshift of Galaxy. |
 | PHOTOMETRIC_MASS | float32 | log(M/M<sub>&amp;odot</sub>) | Stellar Mass from SED Fitting. |
 | MANGADRP_VER | char[20] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | MANGADAP_VER | char[20] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | FIREFLY_VER | char[20] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |



### HDU2: GLOBAL_PARAMETERS
This header contains global information for each galaxy, such as measurements at 1Re or within 3 arcsecs.

#### HDU Type: BINARY TABLE
#### HDU Size:  670 KB

##### Binary Table Caption for HDU2
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | LW_AGE_1RE | float32 | log(Age(Gyr)) | Median value of property within a shell located at 1Re of the galaxy. |
 | LW_AGE_1RE_ERROR | float32 | log(Age(Gyr)) | Median error on property within a shell located at 1Re of the galaxy. |
 | MW_AGE_1RE | float32 | log(Age(Gyr)) | Median value of property within a shell located at 1Re of the galaxy. |
 | MW_AGE_1RE_ERROR | float32 | log(Age(Gyr)) | Median error on property within a shell located at 1Re of the galaxy. |
 | LW_Z_1RE | float32 | [Z/H] | Median value of property within a shell located at 1Re of the galaxy. |
 | LW_Z_1RE_ERROR | float32 | [Z/H] | Median error on property within a shell located at 1Re of the galaxy. |
 | MW_Z_1RE | float32 | [Z/H] | Median value of property within a shell located at 1Re of the galaxy. |
 | MW_Z_1RE_ERROR | float32 | [Z/H] | Median error on property within a shell located at 1Re of the galaxy. |
 | LW_AGE_3ARCSEC | float32 | log(Age(Gyr)) | Value of property within diameter of Sloan Digitial Sky Survey fibre. |
 | LW_AGE_3ARCSEC_ERROR | float32 | log(Age(Gyr)) | Error on value of property within diameter of Sloan Digitial Sky Survey fibre. |
 | MW_AGE_3ARCSEC | float32 | log(Age(Gyr)) | Value of property within diameter of Sloan Digitial Sky Survey fibre. |
 | MW_AGE_3ARCSEC_ERROR | float32 | log(Age(Gyr)) | Error on value of property within diameter of Sloan Digitial Sky Survey fibre. |
 | LW_Z_3ARCSEC | float32 | [Z/H] | Value of property within diameter of Sloan Digitial Sky Survey fibre. |
 | LW_Z_3ARCSEC_ERROR | float32 | [Z/H] | Error on value of property within diameter of Sloan Digitial Sky Survey fibre. |
 | MW_Z_3ARCSEC | float32 | [Z/H] | Value of property within diameter of Sloan Digitial Sky Survey fibre. |
 | MW_Z_3ARCSEC_ERROR | float32 | [Z/H] | Error on value of property within diameter of Sloan Digitial Sky Survey fibre. |



### HDU3: GRADIENT_PARAMETERS
This header contains global information regarding the stellar population gradients within 1.5Re for each galaxy.

#### HDU Type: BINARY TABLE
#### HDU Size:  670 KB

##### Binary Table Caption for HDU3
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | LW_AGE_GRADIENT | float32 | dex/Re | Gradient of linear fit obtained within 1.5Re. |
 | LW_AGE_GRADIENT_ERROR | float32 | dex/Re | Error on gradient obtained within 1.5Re. |
 | LW_AGE_ZEROPOINT | float32 | migration: unit of keyword/column not found. Needs update | Zeropoint of linear fit obtained within 1.5Re. |
 | LW_AGE_ZEROPOINT_ERROR | float32 | migration: unit of keyword/column not found. Needs update | Error on zeropoint obtained within 1.5Re. |
 | MW_AGE_GRADIENT | float32 | dex/Re | Gradient of linear fit obtained within 1.5Re. |
 | MW_AGE_GRADIENT_ERROR | float32 | dex/Re | Error on gradient obtained within 1.5Re. |
 | MW_AGE_ZEROPOINT | float32 | migration: unit of keyword/column not found. Needs update | Zeropoint of linear fit obtained within 1.5Re. |
 | MW_AGE_ZEROPOINT_ERROR | float32 | migration: unit of keyword/column not found. Needs update | Error on zeropoint obtained within 1.5Re. |
 | LW_Z_GRADIENT | float32 | dex/Re | Gradient of linear fit obtained within 1.5Re. |
 | LW_Z_GRADIENT_ERROR | float32 | dex/Re | Error on gradient obtained within 1.5Re. |
 | LW_Z_ZEROPOINT | float32 | migration: unit of keyword/column not found. Needs update | Zeropoint of linear fit obtained within 1.5Re. |
 | LW_Z_ZEROPOINT_ERROR | float32 | migration: unit of keyword/column not found. Needs update | Error on zeropoint obtained within 1.5Re. |
 | MW_Z_GRADIENT | float32 | dex/Re | Gradient of linear fit obtained within 1.5Re. |
 | MW_Z_GRADIENT_ERROR | float32 | dex/Re | Error on gradient obtained within 1.5Re. |
 | MW_Z_ZEROPOINT | float32 | migration: unit of keyword/column not found. Needs update | Zeropoint of linear fit obtained within 1.5Re. |
 | MW_Z_ZEROPOINT_ERROR | float32 | migration: unit of keyword/column not found. Needs update | Error on zeropoint obtained within 1.5Re. |



### HDU4: SPATIAL_INFO
Contains the spatial information, such as bin number, x-position, y-position and radius (in units of effective radius) for each Voronoi Cell.
Data: FITS image

#### HDU Type: IMAGE
#### HDU Size:  573 MB

##### Header Table Caption for HDU4
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 3 | number of array dimensions |
| NAXIS1 | 5 | length of dimension 1 |
| NAXIS2 | 2800 | length of dimension 2 |
| NAXIS3 | 10735 | migration: description of keyword/column not found. Needs update |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| EXTNAME | SPATIAL_INFO | extension name |



### HDU5: SPATIAL_BINID
Contains the 2D map of bin number.
Data: FITS image

#### HDU Type: IMAGE
#### HDU Size:  131 MB

##### Header Table Caption for HDU5
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | 16 | array data type |
| NAXIS | 3 | number of array dimensions |
| NAXIS1 | 80 | length of dimension 1 |
| NAXIS2 | 80 | length of dimension 2 |
| NAXIS3 | 10735 | migration: description of keyword/column not found. Needs update |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| EXTNAME | SPATIAL_BINID | extension name |



### HDU6: LW_AGE_VORONOI
Light-weighted age, and associated error, derived from full spectral fit for each Voronoi Cell.
Data: FITS image

#### HDU Type: IMAGE
#### HDU Size:  229 MB

##### Header Table Caption for HDU6
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 3 | number of array dimensions |
| NAXIS1 | 2 | length of dimension 1 |
| NAXIS2 | 2800 | length of dimension 2 |
| NAXIS3 | 10735 | migration: description of keyword/column not found. Needs update |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| EXTNAME | LW_AGE_VORONOI | extension name |



### HDU7: MW_AGE_VORONOI
Mass-weighted age, and associated error, derived from full spectral fit for each Voronoi Cell.
Data: FITS image

#### HDU Type: IMAGE
#### HDU Size:  229 MB

##### Header Table Caption for HDU7
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 3 | number of array dimensions |
| NAXIS1 | 2 | length of dimension 1 |
| NAXIS2 | 2800 | length of dimension 2 |
| NAXIS3 | 10735 | migration: description of keyword/column not found. Needs update |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| EXTNAME | MW_AGE_VORONOI | extension name |



### HDU8: LW_Z_VORONOI
Light-weighted metallicity, and associated error, derived from full spectral fit for each Voronoi Cell.
Data: FITS image

#### HDU Type: IMAGE
#### HDU Size:  229 MB

##### Header Table Caption for HDU8
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 3 | number of array dimensions |
| NAXIS1 | 2 | length of dimension 1 |
| NAXIS2 | 2800 | length of dimension 2 |
| NAXIS3 | 10735 | migration: description of keyword/column not found. Needs update |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| EXTNAME | LW_Z_VORONOI | extension name |



### HDU9: MW_Z_VORONOI
Mass-weighted metallicity, and associated error, derived from full spectral fit for each Voronoi Cell.
Data: FITS image

#### HDU Type: IMAGE
#### HDU Size:  229 MB

##### Header Table Caption for HDU9
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 3 | number of array dimensions |
| NAXIS1 | 2 | length of dimension 1 |
| NAXIS2 | 2800 | length of dimension 2 |
| NAXIS3 | 10735 | migration: description of keyword/column not found. Needs update |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| EXTNAME | MW_Z_VORONOI | extension name |



### HDU10: E(B_V)_VORONOI
E(B-V) derived from using High-Pass Filter (HPF) method for each Voronoi Cell (See Goddard et al. 2016).
Data: FITS image

#### HDU Type: IMAGE
#### HDU Size:  114 MB

##### Header Table Caption for HDU10
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 2800 | length of dimension 1 |
| NAXIS2 | 10735 | length of dimension 2 |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| EXTNAME | E(B_V)_VORONOI | extension name |



### HDU11: STELLAR_MASS_VORONOI
Stellar mass, and associated error, derived from the full spectral fit for each Voronoi Cell. Different to the global stellar mass.
Data: FITS image

#### HDU Type: IMAGE
#### HDU Size:  458 MB

##### Header Table Caption for HDU11
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 3 | number of array dimensions |
| NAXIS1 | 4 | length of dimension 1 |
| NAXIS2 | 2800 | length of dimension 2 |
| NAXIS3 | 10735 | migration: description of keyword/column not found. Needs update |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| EXTNAME | STELLAR_MASS_VORONOI | extension name |



### HDU12: STELLAR_MASS_REMNANT
Mass of living stars, stellar remnants including white dwarf, neutron star, and black hole.
Data: FITS image

#### HDU Type: IMAGE
#### HDU Size:  917 MB

##### Header Table Caption for HDU12
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 3 | number of array dimensions |
| NAXIS1 | 8 | length of dimension 1 |
| NAXIS2 | 2800 | length of dimension 2 |
| NAXIS3 | 10735 | migration: description of keyword/column not found. Needs update |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| EXTNAME | STELLAR_MASS_REMNANT | extension name |



### HDU13: SURFACE_MASS_DENSITY_VORONOI
Surface Mass Density, and associated error, derived from the full spectral fit for each Voronoi Cell.
Data: FITS image

#### HDU Type: IMAGE
#### HDU Size:  229 MB

##### Header Table Caption for HDU13
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 3 | number of array dimensions |
| NAXIS1 | 2 | length of dimension 1 |
| NAXIS2 | 2800 | length of dimension 2 |
| NAXIS3 | 10735 | migration: description of keyword/column not found. Needs update |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| EXTNAME | SURFACE_MASS_DENSITY_VORONOI | extension name |



### HDU14: STAR_FORMATION_HISTORY
Star formation history in each Voronoi cell reflected by the mass weight of each SSP that contributes to the observed spectra. The first dimension of the array includes the age, metallicity, and mass weights of each of the eight SSPs.
Data: FITS image

#### HDU Type: IMAGE
#### HDU Size:  2 GB

##### Header Table Caption for HDU14
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 4 | number of array dimensions |
| NAXIS1 | 3 | length of dimension 1 |
| NAXIS2 | 8 | length of dimension 2 |
| NAXIS3 | 2800 | migration: description of keyword/column not found. Needs update |
| NAXIS4 | 10735 | migration: description of keyword/column not found. Needs update |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| EXTNAME | STAR_FORMATION_HISTORY | extension name |



### HDU15: SIGNAL_NOISE_VORONOI
Signal-to-noise calculated for each Voronoi Cell in the wavelength range 4500-6000Å.
Data: FITS image

#### HDU Type: IMAGE
#### HDU Size:  114 MB

##### Header Table Caption for HDU15
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 2800 | length of dimension 1 |
| NAXIS2 | 10735 | length of dimension 2 |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |
| EXTNAME | SIGNAL_NOISE_VORONOI | extension name |


