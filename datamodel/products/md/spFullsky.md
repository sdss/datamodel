# Data Model: spFullsky


The combined spectra for all exposures of a given Custom Coadd


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDUS List](#example-hdus-list)
- [Notes](#notes)

---

## Basic Information
The spFullsky files contain the combined spectra for all exposures of a given custom coadd (for an MJD or range of MJDs). This is the custom coadd version of the spField files

### Naming Convention
$BOSS_SPECTRO_REDUX/[RUN2D]/[COADD]/spFullsky-[COADD]-[MJD].fits

### Releases
WORK

### Enviroments
BOSS_SPECTRO_REDUX

### Approximate Size
52 MB

### File Type
FITS

### Generated by Product
idlspec2d

### Is a VAC
False

### HDUS List for release WORK
  - [HDU0: PRIMARY](#hdu0-primary)
  - [HDU1: IVAR](#hdu1-ivar)
  - [HDU2: ANDMASK](#hdu2-andmask)
  - [HDU3: ORMASK](#hdu3-ormask)
  - [HDU4: WAVEDISP](#hdu4-wavedisp)
  - [HDU5: PLUGMAP](#hdu5-plugmap)
  - [HDU6: SKY](#hdu6-sky)
  - [HDU7: SPECRESL](#hdu7-specresl)

---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another

---
## Example HDUS List

### HDU0: PRIMARY
coadded calibrated flux

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | Primary Header created by MWRFITS v1.13 |
| BITPIX | -32 |  |
| NAXIS | 2 |  |
| NAXIS1 | 4648 |  |
| NAXIS2 | 413 |  |
| EXTEND | True | Extensions may be present |
| COEFF0 | 3.5523 | Central wavelength (log10) of first pixel |
| COEFF1 | 0.0001 | Log10 dispersion per pixel |
| CRVAL1 | 3.5523 | Central wavelength (log10) of first pixel |
| CD1_1 | 0.0001 | Log10 dispersion per pixel |
| CRPIX1 | 1 | Starting pixel (1-indexed) |
| CTYPE1 | LINEAR |  |
| MJD | 60000 | Modified Julian Date |
| RUNMJD | 60407 | Modified Julian Date of RUN |
| RUN2D | v6_1_3 | IDLSpec2D Run2d |
| TILEID |  | Tile ID for SDSS BOSS plates (-1 for SDSS) |
| MOON_FRA | 0.270368403284 | Moon Phase |
| SPEC1_G | 6.62995 | (S/N)^2 for spec  1 at mag 21.20 |
| SN2EXT1G | 6.62995 | Extinction corrected (S/N)^2 |
| SPEC1_R | 21.791 | (S/N)^2 for spec  1 at mag 20.20 |
| SN2EXT1R | 21.791 | Extinction corrected (S/N)^2 |
| SPEC1_I | 16.2032 | (S/N)^2 for spec  1 at mag 20.20 |
| SN2EXT1I | 16.2032 | Extinction corrected (S/N)^2 |
| NGAL | 359 | Number of (good) main galaxies |
| GOFFGAL | 0.0602238311768 | Spectrophoto offset for main galaxies in G-band |
| GRMSGAL | 0.358758642181 | Spectrophoto RMS for main galaxies in G-band |
| ROFFGAL | 0.0581752210299 | Spectrophoto offset for main galaxies in R-band |
| RRMSGAL | 0.339271579636 | Spectrophoto RMS for main galaxies in R-band |
| IOFFGAL | 0.10673924994 | Spectrophoto offset for main galaxies in I-band |
| IRMSGAL | 0.382877112938 | Spectrophoto RMS for main galaxies in I-band |
| GROFFGAL | 0.00221052551269 | Spectrophoto offset for main galaxies in (GR) |
| GRRMSGAL | 0.230922157945 | Spectrophoto RMS for main galaxies in (GR) |
| RIOFFGAL | -0.0356044439901 | Spectrophoto offset for main galaxies in (RI) |
| RIRMSGAL | 0.161101424416 | Spectrophoto RMS for main galaxies in (RI) |



### HDU1: IVAR
inverse variance of flux

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU1
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | IMAGE extension |
| BITPIX | -32 | Number of bits per data pixel |
| NAXIS | 2 | Number of data axes |
| NAXIS1 | 4648 |  |
| NAXIS2 | 413 |  |
| PCOUNT | 0 | No Group Parameters |
| GCOUNT | 1 | One Data Group |
| WAT0_001 | system=linear |  |
| WAT1_001 | wtype=linear label=Wavelength units=Angstroms |  |
| CRVAL1 | 3.5523 | Central wavelength (log10) of first pixel |
| CD1_1 | 0.0001 | Log10 dispersion per pixel |
| CRPIX1 | 1 | Starting pixel (1-indexed) |
| CTYPE1 | LINEAR |  |
| DC-FLAG | 1 | Log-linear flag |
| BUNIT | 1/(1E-17 erg/cm^2/s/Ang)^2 |  |
| EXTNAME | IVAR | Inverse Variance |



### HDU2: ANDMASK
AND Mask

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU2
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | IMAGE extension |
| BITPIX | 32 | Number of bits per data pixel |
| NAXIS | 2 | Number of data axes |
| NAXIS1 | 4648 |  |
| NAXIS2 | 413 |  |
| PCOUNT | 0 | No Group Parameters |
| GCOUNT | 1 | One Data Group |
| WAT0_001 | system=linear |  |
| WAT1_001 | wtype=linear label=Wavelength units=Angstroms |  |
| CRVAL1 | 3.5523 | Central wavelength (log10) of first pixel |
| CD1_1 | 0.0001 | Log10 dispersion per pixel |
| CRPIX1 | 1 | Starting pixel (1-indexed) |
| CTYPE1 | LINEAR |  |
| DC-FLAG | 1 | Log-linear flag |
| EXTNAME | ANDMASK | AND Mask |



### HDU3: ORMASK
OR Mask

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU3
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | IMAGE extension |
| BITPIX | 32 | Number of bits per data pixel |
| NAXIS | 2 | Number of data axes |
| NAXIS1 | 4648 |  |
| NAXIS2 | 413 |  |
| PCOUNT | 0 | No Group Parameters |
| GCOUNT | 1 | One Data Group |
| WAT0_001 | system=linear |  |
| WAT1_001 | wtype=linear label=Wavelength units=Angstroms |  |
| CRVAL1 | 3.5523 | Central wavelength (log10) of first pixel |
| CD1_1 | 0.0001 | Log10 dispersion per pixel |
| CRPIX1 | 1 | Starting pixel (1-indexed) |
| CTYPE1 | LINEAR |  |
| DC-FLAG | 1 | Log-linear flag |
| EXTNAME | ORMASK | OR Mask |



### HDU4: WAVEDISP
Wavelength dispersion in number of pixel

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU4
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | IMAGE extension |
| BITPIX | -32 | Number of bits per data pixel |
| NAXIS | 2 | Number of data axes |
| NAXIS1 | 4648 |  |
| NAXIS2 | 413 |  |
| PCOUNT | 0 | No Group Parameters |
| GCOUNT | 1 | One Data Group |
| WAT0_001 | system=linear |  |
| WAT1_001 | wtype=linear label=Wavelength units=Angstroms |  |
| CRVAL1 | 3.5523 | Central wavelength (log10) of first pixel |
| CD1_1 | 0.0001 | Log10 dispersion per pixel |
| CRPIX1 | 1 | Starting pixel (1-indexed) |
| CTYPE1 | LINEAR |  |
| DC-FLAG | 1 | Log-linear flag |
| BUNIT | pixels |  |
| EXTNAME | WAVEDISP | Wavelength dispersion |



### HDU5: PLUGMAP
Target level metadata

#### HDU Type: BINARY TABLE
#### HDU Size:  1 MB

##### Header Table Caption for HDU5
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | Binary table written by MWRFITS v1.13 |
| BITPIX | 8 | Required value |
| NAXIS | 2 | Required value |
| NAXIS1 | 3428 | Number of bytes per row |
| NAXIS2 | 413 | Number of rows |
| PCOUNT | 0 | Normally 0 (no varying arrays) |
| GCOUNT | 1 | Required value |
| TFIELDS | 135 | Number of columns in table |
| COMMENT |  |  |
| COMMENT |  *** End of mandatory fields *** |  |
| COMMENT |  |  |
| EXTNAME | PLUGMAP | Plugmap structure |
| COMMENT |  |  |
| COMMENT |  *** Column formats *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column names *** |  |
| COMMENT |  |  |

##### Binary Table Caption for HDU5
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | CONFFIBERID | int64 |  | Raw Slithead FiberIDs |
 | FIBERTYPE | char[4] |  | Type of fibre (APOGEE, BOSS, or Metrology) |
 | HOLETYPE | char |  | Hole ID in which the positioner is sitting |
 | ASSIGNED | int64 |  | Whether this fibre was assigned to a target |
 | ON_TARGET | int64 |  | Whether this fibre is on target |
 | VALID | int64 |  | alpha and beta angles are valid |
 | DECOLLIDED | int64 |  | this positioner had to be moved to decollide it |
 | FIBERMASK | int64 |  | Fiber level bitmasks (maps to SPPIXMASK) |
 | BADSTDMASK | int64 |  | Standard rejected by magnitude range of design |
 | THROUGHPUT | int64 |  | Plate Fiber throughput (0-65535, 0=no light) |
 | SCI_EXPTIME | float64 | s | Rescaled Science Exposure Time for offset plate |
 | BLUEFIBER | int64 |  | BOSS to assign this target a 'blue' fiber |
 | XFOCAL | float64 | mm | The X value in focal plane coordinates. |
 | YFOCAL | float64 | mm | The Y value in focal plane coordinates. |
 | ZOFFSET | float64 | micron | backstopping offset distance (from washers) |
 | RACAT | float64 | deg | Catalog RA in ICRS coordinates at coord_epoch |
 | DECCAT | float64 | deg | Catalog Dec in ICRS coordinates at coord_epoch |
 | COORD_EPOCH | float64 |  | Epoch of the catalogue coordinates. |
 | PMRA | float64 | mas | Proper motion in RA (pmra is a true angle) |
 | PMDEC | float64 | mas | Proper motion in Dec |
 | PARALLAX | float64 | mas | Parallax |
 | RA | float64 | deg | Calculated on sky fiber RA including delta_RA |
 | DEC | float64 | deg | Calculated on sky fiber Dec including delta_DEC |
 | DELTA_RA | float64 | arcsec | The amount in RA this fiber has been offset |
 | DELTA_DEC | float64 | arcsec | The amount in Dec this fiber has been offset |
 | FIBER_OFFSET | int64 |  | Flag identifying the fiber was offset by design |
 | LAMBDA_EFF | float64 | AA | Wavelength used for coordinate transformations |
 | SPECTROGRAPHID | int64 |  | Spectrograph to which the fibre is assigned. (SDSS-V: 1 = BOSS, 2 = APOGEE) or (SDSS-IV: 1=BOSS SP1, 2=BOSS SP2) |
 | OPTICAL_PROV | char[11] |  | The source of the CATDB_MAG optical magnitudes |
 | MAG | float64[5] |  | [u, g, r, i, z] optical magnitudes |
 | PSFMAG | float64[5] |  | [u, g, r, i, z] optical PSF magnitudes |
 | FIBER2MAG | float64[5] |  | [u, g, r, i, z] optical Fiber2 magnitudes |
 | CATDB_MAG | float64[5] |  | [u, g, r, i, z] Raw TargetDB magnitudes |
 | V05_REV_MAG | int64 |  | 1: revised with RevisedMagnitude Table, 0: raw |
 | GAIA_G_MAG | float64 |  | Gaia G magnitude |
 | BP_MAG | float64 |  | Gaia BP magnitude |
 | RP_MAG | float64 |  | Gaia RP magnitude |
 | GAIA_ID | int64 |  | Gaia-DR2 ID |
 | H_MAG | float64 |  | 2MASS H magnitude |
 | WISE_MAG | float64[4] |  | WISE [W1, W2, W3, W4] band magnitudes |
 | TWOMASS_MAG | float64[3] |  | 2MASS [J, H, Ks] band magnitudes |
 | GUVCAT_MAG | float64[2] |  | GALEX [FUV, NUV] band magnitudes |
 | EBV_SIMPLEDUST2023 | float64 |  | SimpleDust2023 3D dust extinction |
 | EBV_3D | float64 |  | Merged 3D dust extinction |
 | EBV_3DSRC | char[14] |  | Source of Merged 3D dust extinction |
 | GRI_GAIA_TRANSFORM | int64 |  | provenance of photometry in SDSS-V plate design |
 | CALIBFLUX | float64[5] | nanomaggy | SDSS band [u,g,r,i,z] target calibration flux |
 | CALIBFLUX_IVAR | float64[5] | nanomaggy | target calibration flux inverse variance |
 | CALIB_STATUS | int64[5] |  | target calibration status flag |
 | CATEGORY | char[13] |  | Category for 'firstcarton' |
 | OBJTYPE | char[16] |  | Why object was targetted (QSO = Science Target) |
 | SOURCETYPE | char |  | indicate the nature of the source, one of STAR, QSO, GALAXY, or NA |
 | OFFSETID | int64 |  | plate offset associated; 0 = primary pointing |
 | OBJID | int64[5] |  | Unique object id from SDSS imaging (run,rerun,camCol,field,id) |
 | CATALOGID | char[18] |  | CatalogID or uHHMMSS.S+DDMMSS.S for unassigned |
 | ICATALOGID | int64 |  | Raw SDSS-V CatalogID |
 | SDSS_ID | int64 |  | SDSS_ID of Target |
 | CATVERSION | char[5] |  | Catalog Version of SDSS-V CatalogID |
 | CARTON_TO_TARGET_PK | int64 |  | SDSS-V Carton_to_Target primary key for SDSSDB |
 | FIRSTCARTON | char[17] |  | Main carton from which this carton was drawn |
 | CARTONNAME | char[17] |  | Main carton from which this carton was drawn |
 | PROGRAM | char[7] |  | Program for 'firstcarton' |
 | MAPPER | char[3] |  | SDSS-V Mapper for target |
 | SURVEY | char[3] |  | SDSS Survey for target |
 | SDSSC2BV | char |  | SDSS5_TARGET_FLAG Carton to Bit Version |
 | SDSSV_BOSS_TARGET0 | int64 |  | Targeting bitmask for SDSSV-BOSS |
 | SDSSV_APOGEE_TARGET0 | int64 |  | Targeting bitmask for SDSSV-APOGEE |
 | BOSS_TARGET1 | int64 |  | Targeting bitmask for SDSS-III BOSS |
 | BOSS_TARGET2 | int64 |  | Targeting bitmask for SDSS-III BOSS |
 | ANCILLARY_TARGET1 | int64 |  | Targeting bitmask for SDSS-III BOSS Ancillary |
 | ANCILLARY_TARGET2 | int64 |  | Targeting bitmask for SDSS-III BOSS Ancillary |
 | EBOSS_TARGET0 | int64 |  | Targeting bitmask for SDSS-IV eBOSS |
 | EBOSS_TARGET1 | int64 |  | Targeting bitmask for SDSS-IV eBOSS |
 | EBOSS_TARGET2 | int64 |  | Targeting bitmask for SDSS-IV eBOSS |
 | EBOSS_TARGET_ID | int64 |  | Targeting bitmask for SDSS-IV eBOSS |
 | THING_ID_TARGETING | int64 |  | thing_id from targeting version |
 | PRIMTARGET | int64 |  | Plate Primary target flags |
 | SECTARGET | int64 |  | Plate Secondary target flags |
 | STARL | float64 |  | likelihood object is star (0-1, Plate OBJECT holes only) |
 | EXPL | float64 |  | likelihood object is exponential disk (0-1, Plate OBJECT holes only) |
 | DEVAUCL | float64 |  | likelihood object is deVaucouleurs profile (0-1, Plate OBJECT holes only) |
 | RUN | int64 |  | SDSS imaging run, for SDSS imaging targets |
 | RERUN | char |  | SDSS imaging rerun, for SDSS imaging targets |
 | CAMCOL | int64 |  | SDSS imaging camcol, for SDSS imaging targets |
 | FIELD | int64 |  | SDSS imaging field, for SDSS imaging targets |
 | ID | int64 |  | SDSS imaging id, for SDSS imaging targets |
 | FIELDCADENCE | char[13] |  | SDSS-V FPS Field Cadence |
 | CADENCE | char[10] |  | SDSS-V FPS target Cadence |
 | EBV | float32 |  | dust extinction |
 | EBV_TYPE | char[3] |  | dust extinction source |
 | SDSS5_TARGET_FLAGS | bool[29] |  | Targeting Flags for SSDSV Targeting |
 | TARGET_INDEX | int16 |  | Index of target on combined spField |
 | NEXP | int16 |  | Number of Included Exposures |
 | MJD_FINAL | float64 |  | Mean MJD of the Coadded Spectra |
 | MOON_DIST | char[47] | deg | Mean Moon-target separation of Coadded Spectra |
 | MOON_PHASE | char[39] |  | Mean Moon phase of the Coadded Spectra |
 | FIBERID_LIST | char[31] |  | List of FiberIDs contributing to Stack |
 | RA_LIST | char[87] | deg | List of measured RA per exposure |
 | DEC_LIST | char[71] | deg | List of measured DEC per exposure |
 | DELTA_RA_LIST | char[31] | arcsec | List of designed RA offsets per exposure |
 | DELTA_DEC_LIST | char[31] | arcsec | List of designed DEC offsets per exposure |
 | EXPTIME | int16 | s | Total Exposure time of Coadded Spectra |
 | FIRSTCARTON_LIST | char[17] |  | List of Primary SDSS Carton for target per exposure |
 | CARTON_TO_TARGET_PK_LIST | char[9] |  | List of SDSS-V Carton_to_Target primary key for SDSSDB per exposure |
 | ASSIGNED_LIST | char[15] |  | Whether this fibre was assigned to a target per exposure |
 | ON_TARGET_LIST | char[15] |  | Whether this fibre is on target per exposure |
 | VALID_LIST | char[15] |  | alpha and beta angles are valid per exposure |
 | DECOLLIDED_LIST | char[15] |  | this positioner had to be moved to decollide it per exposure |
 | EXP_DISP_MED | float64 |  | Dispersion of Median Exposure Flux |
 | XFOCAL_LIST | char[71] | mm | Hole/robot x-axis position in focal plane per exposure |
 | YFOCAL_LIST | char[71] | mm | Hole/robot y-axis position in focal plane per exposure |
 | TAI_LIST | char[87] | s | List Tai for each exposure (at midpoint) |
 | FIELDSNR2G_LIST | char[39] |  | Overall Field (S/N)^2 in g per exposure |
 | FIELDSNR2R_LIST | char[39] |  | Overall Field (S/N)^2 in r per exposure |
 | FIELDSNR2I_LIST | char[39] |  | Overall Field (S/N)^2 in i per exposure |
 | MJDLIST | char[47] |  | List of MJD of each included exposures |
 | DESIGNS | char[55] |  | List of Included Designs |
 | CONFIGS | char[39] |  | List of Included Configurations |
 | AIRMASS | float64 |  | Airmass at time of observation |
 | AIRMASS_LIST | char[79] |  | Airmass at time of observation per exposure |
 | SEEING20 | float64 | arcsec | Mean 20% seeing during exposures (arcsec) |
 | SEEING20_LIST | char[80] |  | 20% seeing during exposures (arcsec) per exposure |
 | SEEING50 | float64 | arcsec | Mean 50% seeing during exposures (arcsec) |
 | SEEING50_LIST | char[79] |  | 50% seeing during exposures (arcsec) per exposure |
 | SEEING80 | float64 | arcsec | Mean 80% seeing during exposures (arcsec) |
 | SEEING80_LIST | char[79] |  | 80% seeing during exposures (arcsec) per exposure |
 | RMSOFF20 | float64 | arcsec | mean 20% of RMS offset of guide fibers |
 | RMSOFF20_LIST | char[94] |  | 20% of RMS offset of guide fibers per exposure |
 | RMSOFF50 | float64 | arcsec | mean 50% of RMS offset of guide fibers |
 | RMSOFF50_LIST | char[91] |  | 50% of RMS offset of guide fibers per exposure |
 | RMSOFF80 | float64 | arcsec | mean 80% of RMS offset of guide fibers |
 | RMSOFF80_LIST | char[87] |  | 28% of RMS offset of guide fibers per exposure |
 | FIBER_RA | float64 | deg | Fiber RA [J2000 for plate; at exp for FPS] |
 | FIBER_DEC | float64 | deg | Fiber DEC [J2000 for plate; at exp for FPS] |
 | OBS | char[8] |  | Observatories Associated with Coadd |



### HDU6: SKY
subtracted sky flux

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU6
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | IMAGE extension |
| BITPIX | -32 | Number of bits per data pixel |
| NAXIS | 2 | Number of data axes |
| NAXIS1 | 4648 |  |
| NAXIS2 | 413 |  |
| PCOUNT | 0 | No Group Parameters |
| GCOUNT | 1 | One Data Group |
| WAT0_001 | system=linear |  |
| WAT1_001 | wtype=linear label=Wavelength units=Angstroms |  |
| CRVAL1 | 3.5523 | Central wavelength (log10) of first pixel |
| CD1_1 | 0.0001 | Log10 dispersion per pixel |
| CRPIX1 | 1 | Starting pixel (1-indexed) |
| CTYPE1 | LINEAR |  |
| DC-FLAG | 1 | Log-linear flag |
| EXTNAME | SKY | Subtracted sky flux |



### HDU7: SPECRESL
subtracted sky flux

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU7
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | IMAGE extension |
| BITPIX | -32 | Number of bits per data pixel |
| NAXIS | 2 | Number of data axes |
| NAXIS1 | 4648 |  |
| NAXIS2 | 413 |  |
| PCOUNT | 0 | No Group Parameters |
| GCOUNT | 1 | One Data Group |
| WAT0_001 | system=linear |  |
| WAT1_001 | wtype=linear label=Wavelength units=Angstroms |  |
| CRVAL1 | 3.5523 | Central wavelength (log10) of first pixel |
| CD1_1 | 0.0001 | Log10 dispersion per pixel |
| CRPIX1 | 1 | Starting pixel (1-indexed) |
| CTYPE1 | LINEAR |  |
| DC-FLAG | 1 | Log-linear flag |
| BUNIT | angstroms |  |
| EXTNAME | SPECRESL | Spectral resolution |



---
## Notes
None