# Data Model: ap2D





## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDUS List](#example-hdus-list)
- [Notes](#notes)

---

## Basic Information
ap2D files contain 2D data derived from the up-the-ramp data cubes. Cosmic rays are flagged and CR repair is attempted. Saturated pixels are flagged. Dark current is subtracted, and the final 2D image is flat-fielded.

### Naming Convention
$APOGEE_REDUX/[APRED]/exposures/[INSTRUMENT]/[MJD]/ap2D-[CHIP]-[NUM8].fits

### Releases
WORK

### Enviroments
APOGEE_REDUX

### Approximate Size
40 MB

### File Type
FITS

### Generated by Product
apogee_drp

### Is a VAC
False

### HDUS List for release WORK
  - [HDU0: PRIMARY](#hdu0-primary)
  - [HDU1: ](#hdu1-)
  - [HDU2: ](#hdu2-)
  - [HDU3: ](#hdu3-)

---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another

---
## Example HDUS List

### HDU0: PRIMARY


#### HDU Type: IMAGE
#### HDU Size:  0 bytes

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | image conforms to FITS standard |
| BITPIX | 16 | bits per data value |
| NAXIS | 0 | number of axes |
| EXTEND | True | file may contain extensions |
| INTDELAY | 0.1 | Integration Delay(S) |
| DATE-OBS | 2021-02-16T21:22:28.692 | Date at start of integration |
| TIMESYS | UTC | Time Zone of Date |
| NFRAMES | 10 | Num of SUTR/Fow reads |
| INTOFF | 10647 | Single read duration in mSec |
| EXPTIME | 106.57 | Actual Integration Time |
| FILENAME | /data-ql/data/59262/apRaw-37000004-001.fits | Fits file name root |
| IMAGETYP | QuartzFlat | Object type for EXP |
| FULLX | 8192 | Camera Full Frame X DIM |
| FULLY | 2048 | Camera Full Frame X DIM |
| BEGX | 1 | IRAF 1-indexed Value |
| BEGY | 1 | IRAF 1-indexed Value |
| BINX | 1 | in pixels |
| BINY | 1 | in pixels |
| ACAMREV | UVA-Astrocam v1.2r55 | Camera Software revision |
| OBSCMNT | None | Observer comment |
| LKSHPWR | 0.0 | LS-PWR1-% |
| TDETTOP | 74.277 | T_DETPOLE_TOP in Degrees K |
| TDETBASE | 74.274 | T_DETPOLE_BASE in Degrees K |
| COLPITCH | 0.0 | Collimator Pitch(pix) |
| TTENTTOP | 83.161 | T_TENT_TOP in Degrees K |
| COLLM3 | 0.0 | Collimator M3(um) |
| TCLDPMID | 77.572 | T_CP_MIDDLE in Degrees K |
| COLLM2 | 0.0 | Collimator M2(um) |
| COLLM1 | 0.0 | Collimator M1(um) |
| TGETTER | 75.806 | T_GETTER in Degrees K |
| TTLMBRD | 295.927 | T_TempBrd in Degrees K |
| TLSOUTH | 75.888 | T_L_SOUTH in Degrees K |
| TLNORTH | 76.445 | T_L_NORTH in Degrees K |
| TLSCAM2 | 78.811 | T_LS-Camera2 in Degrees K |
| TLSCAM1 | 78.805 | T_LS-Camera1 in Degrees K |
| TLSDETC | 74.598 | T_LS-DetectorC in Degrees K |
| TLSDETB | 73.212 | T_LS-DetectorB in Degrees K |
| TPGVAC | 1.072e-06 | Pfeiffer-Vacuum in Torr |
| LN2CNTRL | 0.0 | LN2(%) |
| TCAMAFT | 77.645 | T_CAM_AFT in Degrees K |
| TCAMMID | 78.401 | T_CAM_MIDDLE in Degrees K |
| COLLYAW | 0.0 | Collimator Yaw(pix) |
| TCAMFWD | 78.405 | T_CAM_FWD in Degrees K |
| TEMPVPH | 77.744 | T_VPH in Degrees K |
| TRADSHLD | 88.401 | T_RADSHIELD_E in Degrees K |
| TCOLLIM | 78.472 | T_COLLIMATOR in Degrees K |
| TCPCORN | 79.549 | T_CP_CORNER in Degrees K |
| TCLDPHNG | 79.033 | T_CP_HANGERS in Degrees K |
| COLLPIST | 0.0 | Collimator Piston(um) |
| DITHPIX | 12.994 | Dither Position(pix) |
| RELHUM | 16.119 | RH_T(%) |
| LN2LEVEL | 95.412 | LN2_T(%) |
| MKSVAC | 9.0796e-07 | MKS-Vacuum in Torr |
| OBJECT | ObjName |  |
| FILTER1 | FILTER |  |
| ICSREV | APOGEE ICS2.0r033 |  |
| DSPFILE | UNKNOWN |  |
| TELESCOP | SDSS 2-5m |  |
| EXPTYPE | QUARTZFLAT |  |
| LAMPQRTZ | True | CalBox Quartz Lamp Status |
| LAMPUNE | False | CalBox UNe Lamp Status |
| LAMPTHAR | False | CalBox ThArNe Lamp Status |
| LAMPSHTR | True | CalBox Shutter Lamp Status |
| LAMPCNTL | True | CalBox Controller Status |
| SEEING | 2.38128 | RMS seeing from guide fibers |
| FF | 0 0 0 0 | FF lamps 1:on 0:0ff |
| NE | 0 0 0 0 | NE lamps 1:on 0:0ff |
| HGCD | 0 0 0 0 | HGCD lamps 1:on 0:0ff |
| FFS | 1 1 1 1 1 1 1 1 | Flatfield Screen 1:closed 0:open |
| OBJSYS | Mount | The TCC objSys |
| RA | NaN | Telescope is not tracking the sky |
| DEC | NaN | Telescope is not tracking the sky |
| RADEG | NaN | Telescope is not tracking the sky |
| DECDEG | NaN | Telescope is not tracking the sky |
| SPA | NaN | Telescope is not tracking the sky |
| ROTPOS | 0.0 | Rotator request position (deg) |
| BOREOFFX | 0.0 | TCC Boresight offset, deg |
| BOREOFFY | 0.0 | TCC Boresight offset, deg |
| ARCOFFX | 0.0 | TCC ObjArcOff, deg |
| ARCOFFY | 0.0 | TCC ObjArcOff, deg |
| CALOFFX | 0.0 | TCC CalibOff, deg |
| CALOFFY | 0.0 | TCC CalibOff, deg |
| CALOFFR | 0.0 | TCC CalibOff, deg |
| GUIDOFFX | 0.0 | TCC GuideOff, deg |
| GUIDOFFY | 0.0 | TCC GuideOff, deg |
| GUIDOFFR | 0.0 | TCC GuideOff, deg |
| AZ | 121.000018 | Azimuth axis pos. (approx, deg) |
| ALT | 30.046861 | Altitude axis pos. (approx, deg) |
| IPA | -0.000509 | Rotator axis pos. (approx, deg) |
| FOCUS | 0.0 | User-specified focus offset (um) |
| M2PISTON | 3657.49 | TCC SecOrient |
| M2XTILT | -14.12 | TCC SecOrient |
| M2YTILT | -3.16 | TCC SecOrient |
| M2XTRAN | 12.52 | TCC SecOrient |
| M2YTRAN | 114.28 | TCC SecOrient |
| M2ZROT | -16.85 | TCC SecOrient |
| M1PISTON | 0.04 | TCC PrimOrient |
| M1XTILT | 69.89 | TCC PrimOrient |
| M1YTILT | 100.0 | TCC PrimOrient |
| M1XTRAN | 375.3 | TCC PrimOrient |
| M1YTRAN | 622.11 | TCC PrimOrient |
| M1ZROT | 0.04 | TCC PrimOrient |
| SCALE | 1.0 | User-specified scale factor |
| V_GUIDER | 3.9.4 | version of the current guiderActor |
| V_SOP | 4.0.8 | version of the current sopActor |
| NAME | 15002-59259-01 | The name of the currently loaded plate |
| PLATEID | 15002 | The currently loaded plate |
| CARTID | 2 | The currently loaded cartridge |
| MAPID | 1 | The mapping version of the loaded plate |
| POINTING | A | The currently specified pointing |
| PLATETYP | BHM&MWM | Type of plate (e.g. BOSS, MANGA, APOGEE, APOGEE |
| SRVYMODE | BHM lead | Survey leading this observation and its mode |
| CHIP | a |  |
| NREAD | 10 |  |
| V_APRED | daily |  |
| HISTORY | AP3D: Wed Feb 17 11:01:02 2021 |  |
| HISTORY | AP3D: u0914350 on notch288 |  |
| HISTORY | AP3D: IDL 8.5.1 linux x86_64 |  |
| HISTORY | AP3D:  APOGEE Reduction Pipeline Version: daily |  |
| HISTORY | AP3D: Output File: |  |
| HISTORY | AP3D:  HDU1 - image (ADU) |  |
| HISTORY | AP3D:  HDU2 - error (ADU) |  |
| HISTORY | AP3D:  HDU3 - flag mask |  |
| HISTORY | AP3D:         1 - bad pixels |  |
| HISTORY | AP3D:         2 - cosmic ray |  |
| HISTORY | AP3D:         4 - saturated |  |
| HISTORY | AP3D:         8 - unfixable |  |
| HISTORY | AP3D: Global fractional variability = 0.091 |  |
| HISTORY | AP3D: BAD PIXEL MASK file="/uufs/chpc.utah.edu/common/home/sdss50/sdsswo |  |
| HISTORY | AP3D: rk/mwm/apogee/spectro/redux/daily/cal/apogee-n/bpm/apBPM-a-3377000 |  |
| HISTORY | AP3D: DETECTOR file="/uufs/chpc.utah.edu/common/home/sdss50/sdsswork/mwm |  |
| HISTORY | AP3D: /apogee/spectro/redux/daily/cal/apogee-n/detector/apDetector-a-133 |  |
| HISTORY | AP3D: Dark Current Correction file="/uufs/chpc.utah.edu/common/home/sdss |  |
| HISTORY | AP3D: 50/sdsswork/mwm/apogee/spectro/redux/daily/cal/apogee-n/darkcorr/a |  |
| HISTORY | AP3D: Flat Field Correction file="/uufs/chpc.utah.edu/common/home/sdss50 |  |
| HISTORY | AP3D: /sdsswork/mwm/apogee/spectro/redux/daily/cal/apogee-n/flatcorr/apF |  |
| HISTORY | AP3D: Persistence mask file="/uufs/chpc.utah.edu/common/home/sdss50/sdss |  |
| HISTORY | AP3D: work/mwm/apogee/spectro/redux/daily/cal/apogee-n/persist/apPersist |  |
| HISTORY | AP3D: 74065 pixels are bad |  |
| HISTORY | AP3D: 73 pixels have cosmic rays |  |
| HISTORY | AP3D: Cosmic Rays FIXED |  |
| HISTORY | AP3D: 25 pixels are saturated |  |
| HISTORY | AP3D: 25 saturated pixels FIXED |  |
| HISTORY | AP3D: 0 pixels are unfixable |  |
| HISTORY | AP3D: UP-THE-RAMP Sampling |  |
| UT-MID | 2021-02-16T21:23:22.0 | Date at midpoint of exposure |
| JD-MID | 2459262.39123 | JD at midpoint of exposure |



### HDU1: 


#### HDU Type: IMAGE
#### HDU Size:  16 MB

##### Header Table Caption for HDU1
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | IMAGE extension |
| BITPIX | -32 | Number of bits per data pixel |
| NAXIS | 2 | Number of data axes |
| NAXIS1 | 2048 |  |
| NAXIS2 | 2048 |  |
| PCOUNT | 0 | No Group Parameters |
| GCOUNT | 1 | One Data Group |
| CTYPE1 | Pixel |  |
| CTYPE2 | Pixel |  |
| BUNIT | Flux (ADU) |  |



### HDU2: 


#### HDU Type: IMAGE
#### HDU Size:  16 MB

##### Header Table Caption for HDU2
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | IMAGE extension |
| BITPIX | -32 | Number of bits per data pixel |
| NAXIS | 2 | Number of data axes |
| NAXIS1 | 2048 |  |
| NAXIS2 | 2048 |  |
| PCOUNT | 0 | No Group Parameters |
| GCOUNT | 1 | One Data Group |
| CTYPE1 | Pixel |  |
| CTYPE2 | Pixel |  |
| BUNIT | Error (ADU) |  |



### HDU3: 


#### HDU Type: IMAGE
#### HDU Size:  8 MB

##### Header Table Caption for HDU3
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | IMAGE extension |
| BITPIX | 16 | Number of bits per data pixel |
| NAXIS | 2 | Number of data axes |
| NAXIS1 | 2048 |  |
| NAXIS2 | 2048 |  |
| PCOUNT | 0 | No Group Parameters |
| GCOUNT | 1 | One Data Group |
| CTYPE1 | Pixel |  |
| CTYPE2 | Pixel |  |
| BUNIT | Flag Mask (bitwise) |  |
| HISTORY | Explanation of BITWISE flag mask |  |
| HISTORY |  1 - bad pixels |  |
| HISTORY |  2 - cosmic ray |  |
| HISTORY |  4 - saturated |  |
| HISTORY |  8 - unfixable |  |



---
## Notes
None