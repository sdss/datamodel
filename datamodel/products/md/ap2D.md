# Data Model: ap2D


migration: needs update


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDU List](#example-hdu-list)


---

## Basic Information
ap2D files contain 2D data derived from the up-the-ramp data cubes. Cosmic
rays are flagged and CR repair is attempted. Saturated pixels are flagged.
Dark current is subtracted, and the final 2D image is flat-fielded.

### Naming Convention
<code>ap2D-[abc]-[0-9]{8}\.fits</code>

### Releases
DR16, WORK

### Enviroments
APOGEE_REDUX

### Approximate Size
56 MB

### File Type
FITS

### Generated by Product
migration: not in database. Needs update

### HDU List for release WORK
  - [HDU0: PRIMARY](#hdu0-primary)
  - [HDU1: ](#hdu1-)
  - [HDU2: ](#hdu2-)
  - [HDU3: ](#hdu3-)
  - [HDU4: ](#hdu4-)


---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another
 - WORK
   - from: DR16
   - note: No changes

---
## Example HDU List


### HDU0: PRIMARY


#### HDU Type: IMAGE
#### HDU Size:  0 bytes

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | image conforms to FITS standard |
| BITPIX | 16 | bits per data value |
| NAXIS | 0 | number of axes |
| EXTEND | True | file may contain extensions |
| INTDELAY | 0.1 | Integration Delay(S) |
| DATE-OBS | 2011-09-06T08:05:14.561 | Date at start of integration |
| TIMESYS | UTC | Time Zone of Date |
| NFRAMES | 40 | Num of SUTR/Fow reads |
| INTOFF | 10647 | Single read duration in mSec |
| EXPTIME | 425.98 | Actual Integration Time |
| FILENAME | /data-ql/data/55810/apRaw-02480089-001.fits | Fits file name root |
| IMAGETYP | ArcLamp | Object type for EXP |
| FULLX | 8192 | Camera Full Frame X DIM |
| FULLY | 2048 | Camera Full Frame X DIM |
| BEGX | 1 | IRAF 1-indexed Value |
| BEGY | 1 | IRAF 1-indexed Value |
| BINX | 1 | in pixels |
| BINY | 1 | in pixels |
| ACAMREV | UVA-Astrocam v1.2r55 | Camera Software revision |
| OBSCMNT | None | Observer comment |
| LKSHPWR | 0.0 | LS-PWR1-% |
| TDETTOP | 74.517 | T_DETPOLE_TOP in Degrees K |
| TDETBASE | 75.426 | T_DETPOLE_BASE in Degrees K |
| COLPITCH | 5.817 | Collimator Pitch(pix) |
| TTENTTOP | 83.063 | T_TENT_TOP in Degrees K |
| COLLM3 | 2377.976 | Collimator M3(um) |
| TCLDPMID | 77.484 | T_CP_MIDDLE in Degrees K |
| COLLM2 | 2354.858 | Collimator M2(um) |
| COLLM1 | 2494.161 | Collimator M1(um) |
| TGETTER | 76.12 | T_GETTER in Degrees K |
| TTLMBRD | 300.936 | T_TempBrd in Degrees K |
| TLSOUTH | 76.239 | T_L_SOUTH in Degrees K |
| TLNORTH | 77.283 | T_L_NORTH in Degrees K |
| TLSCAM2 | 78.917 | T_LS-Camera2 in Degrees K |
| TLSCAM1 | 78.904 | T_LS-Camera1 in Degrees K |
| TLSDETC | 74.873 | T_LS-DetectorC in Degrees K |
| TLSDETB | 73.908 | T_LS-DetectorB in Degrees K |
| TPGVAC | 7.36e-07 | Pfeiffer-Vacuum in Torr |
| LN2CNTRL | 0.0 | LN2(%) |
| TCAMAFT | 77.973 | T_CAM_AFT in Degrees K |
| TCAMMID | 78.741 | T_CAM_MIDDLE in Degrees K |
| COLLYAW | 17.413 | Collimator Yaw(pix) |
| TCAMFWD | 78.798 | T_CAM_FWD in Degrees K |
| TEMPVPH | 77.976 | T_VPH in Degrees K |
| TRADSHLD | 87.507 | T_RADSHIELD_E in Degrees K |
| TCOLLIM | 79.127 | T_COLLIMATOR in Degrees K |
| TCPCORN | 79.478 | T_CP_CORNER in Degrees K |
| TCLDPHNG | 79.685 | T_CP_HANGERS in Degrees K |
| COLLPIST | 2401.243 | Collimator Piston(um) |
| DITHPIX | 13.499 | Dither Position(pix) |
| RELHUM | 30.335 | RH_T(%) |
| LN2LEVEL | 89.739 | LN2_T(%) |
| MKSVAC | 7.486e-07 | MKS-Vacuum in Torr |
| OBJECT | ObjName | migration: description of keyword/column is None in database. Needs update |
| FILTER1 | FILTER | migration: description of keyword/column is None in database. Needs update |
| ICSREV | APOGEE ICS2.0r032 | migration: description of keyword/column is None in database. Needs update |
| DSPFILE | UNKNOWN | migration: description of keyword/column is None in database. Needs update |
| TELESCOP | SDSS 2-5m | migration: description of keyword/column is None in database. Needs update |
| EXPTYPE | ARCLAMP | migration: description of keyword/column is None in database. Needs update |
| LAMPQRTZ | 0 | CalBox Quartz Lamp Status |
| LAMPUNE | 1 | CalBox UNe Lamp Status |
| LAMPTHAR | 0 | CalBox ThArNe Lamp Status |
| LAMPSHTR | 1 | CalBox Shutter Lamp Status |
| LAMPCNTL | 1 | CalBox Controller Status |
| SEEING | 1.30041 | RMS seeing from guide fibers |
| FF | 0 0 0 0 | FF lamps 1:on 0:0ff |
| NE | 0 0 0 0 | NE lamps 1:on 0:0ff |
| HGCD | 0 0 0 0 | HGCD lamps 1:on 0:0ff |
| FFS | 0 0 0 0 0 0 0 0 | Flatfield Screen 1:closed 0:open |
| OBJSYS | ICRS | The TCC objSys |
| RA | 0.169817 | RA of telescope boresight (deg) |
| DEC | -2.276146 | Dec of telescope boresight (deg) |
| RADEG | 0.1768 | RA of telescope pointing(deg) |
| DECDEG | -2.2798 | Dec of telescope pointing (deg) |
| ROTPOS | 0.0 | Rotator request position (deg) |
| BOREOFFX | 0.0 | TCC Boresight offset, deg |
| BOREOFFY | 0.0 | TCC Boresight offset, deg |
| ARCOFFX | -0.001981 | TCC ObjArcOff, deg |
| ARCOFFY | 0.001654 | TCC ObjArcOff, deg |
| OBJOFFX | -0.005 | TCC ObjOff, deg |
| OBJOFFY | 0.002 | TCC ObjOff, deg |
| CALOFFX | 0.00079 | TCC CalibOff, deg |
| CALOFFY | 0.000357 | TCC CalibOff, deg |
| CALOFFR | 0.0 | TCC CalibOff, deg |
| GUIDOFFX | 0.0 | TCC GuideOff, deg |
| GUIDOFFY | 0.0 | TCC GuideOff, deg |
| GUIDOFFR | 0.032129 | TCC GuideOff, deg |
| AZ | -0.188 | Azimuth axis pos. (approx, deg) |
| ALT | 55.048 | Altitude axis pos. (approx, deg) |
| IPA | 179.841 | Rotator axis pos. (approx, deg) |
| SPA | -0.4256220976409912 | TCC SpiderInstAng |
| FOCUS | 302.04 | User-specified focus offset (um) |
| M2PISTON | -707.6 | TCC SecOrient |
| M2XTILT | 12.99 | TCC SecOrient |
| M2YTILT | 8.02 | TCC SecOrient |
| M2XTRAN | -59.8 | TCC SecOrient |
| M2YTRAN | 35.72 | TCC SecOrient |
| M1PISTON | -2628.06 | TCC PrimOrient |
| M1XTILT | -24.31 | TCC PrimOrient |
| M1YTILT | 11.4 | TCC PrimOrient |
| M1XTRAN | 611.94 | TCC PrimOrient |
| M1YTRAN | 1325.79 | TCC PrimOrient |
| SCALE | 1.000266 | User-specified scale factor |
| NAME | 4354-55801-01 | The name of the currently loaded plate |
| PLATEID | 4354 | The currently loaded plate |
| CARTID | 17 | The currently loaded cartridge |
| MAPID | 1 | The mapping version of the loaded plate |
| POINTING | A | The currently specified pointing |
| CHIP | c | migration: description of keyword/column is None in database. Needs update |
| NREAD | 40 | migration: description of keyword/column is None in database. Needs update |
| V_APRED | 0.17.14 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Mon Jan 25 23:06:50 2021 | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: u0914351 on notch285 | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: IDL 8.4 linux x86_64 | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D:  APOGEE Reduction Pipeline Version: 0.17.14 | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: Output File: | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D:  HDU1 - image (ADU) | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D:  HDU2 - error (ADU) | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D:  HDU3 - flag mask | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D:         1 - bad pixels | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D:         2 - cosmic ray | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D:         4 - saturated | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D:         8 - unfixable | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D:  HDU4 - persistence correction (ADU) | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: Global fractional variability = 0.167 | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: BAD PIXEL MASK file="/uufs/chpc.utah.edu/common/home/sdss/apogeewo | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: rk/apogee/spectro/redux/dr17/cal/bpm/apBPM-c-12910009.fits" | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: DETECTOR file="/uufs/chpc.utah.edu/common/home/sdss/apogeework/apo | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: gee/spectro/redux/dr17/cal/detector/apDetector-c-11870003.fits" | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: Dark Current Correction file="/uufs/chpc.utah.edu/common/home/sdss | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: /apogeework/apogee/spectro/redux/dr17/cal/darkcorr/apDark-c-129100 | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: Flat Field Correction file="/uufs/chpc.utah.edu/common/home/sdss/a | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: pogeework/apogee/spectro/redux/dr17/cal/flatcorr/apFlat-c-04750009 | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: Persistence mask file="/uufs/chpc.utah.edu/common/home/sdss/apogee | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: work/apogee/spectro/redux/dr17/cal/persist/apPersist-c-04680019.fi | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: Persistence model file="/uufs/chpc.utah.edu/common/home/sdss/apoge | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: ework/apogee/spectro/redux/dr17/cal/persist/apPersistModel-c-57184 | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: Exposure history file="/uufs/chpc.utah.edu/common/home/sdss/apogee | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: work/apogee/spectro/redux/dr17/exposures/apogee-n/55810/apHist-c-5 | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: 72352 pixels are bad | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: 283 pixels have cosmic rays | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: Cosmic Rays FIXED | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: 5992 pixels are saturated | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: 5991 saturated pixels FIXED | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: 1 pixels are unfixable | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: UP-THE-RAMP Sampling | AP3D: UP-THE-RAMP Sampling |
| HISTORY | AP3D: Persistence correction: 1.00 1.00 0.00 | AP3D: UP-THE-RAMP Sampling |
| UT-MID | 2011-09-06T08:08:47.6 | Date at midpoint of exposure |
| JD-MID | 2455810.83944 | JD at midpoint of exposure |



### HDU1: 


#### HDU Type: IMAGE
#### HDU Size:  16 MB

##### Header Table Caption for HDU1
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | IMAGE extension |
| BITPIX | -32 | Number of bits per data pixel |
| NAXIS | 2 | Number of data axes |
| NAXIS1 | 2048 | length of dimension 1 |
| NAXIS2 | 2048 | length of dimension 2 |
| PCOUNT | 0 | No Group Parameters |
| GCOUNT | 1 | One Data Group |
| CTYPE1 | Pixel | migration: description of keyword/column is None in database. Needs update |
| CTYPE2 | Pixel | migration: description of keyword/column is None in database. Needs update |
| BUNIT | Flux (ADU) | migration: description of keyword/column is None in database. Needs update |



### HDU2: 


#### HDU Type: IMAGE
#### HDU Size:  16 MB

##### Header Table Caption for HDU2
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | IMAGE extension |
| BITPIX | -32 | Number of bits per data pixel |
| NAXIS | 2 | Number of data axes |
| NAXIS1 | 2048 | length of dimension 1 |
| NAXIS2 | 2048 | length of dimension 2 |
| PCOUNT | 0 | No Group Parameters |
| GCOUNT | 1 | One Data Group |
| CTYPE1 | Pixel | migration: description of keyword/column is None in database. Needs update |
| CTYPE2 | Pixel | migration: description of keyword/column is None in database. Needs update |
| BUNIT | Error (ADU) | migration: description of keyword/column is None in database. Needs update |



### HDU3: 


#### HDU Type: IMAGE
#### HDU Size:  8 MB

##### Header Table Caption for HDU3
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | IMAGE extension |
| BITPIX | 16 | Number of bits per data pixel |
| NAXIS | 2 | Number of data axes |
| NAXIS1 | 2048 | length of dimension 1 |
| NAXIS2 | 2048 | length of dimension 2 |
| PCOUNT | 0 | No Group Parameters |
| GCOUNT | 1 | One Data Group |
| CTYPE1 | Pixel | migration: description of keyword/column is None in database. Needs update |
| CTYPE2 | Pixel | migration: description of keyword/column is None in database. Needs update |
| BUNIT | Flag Mask (bitwise) | migration: description of keyword/column is None in database. Needs update |
| HISTORY | Explanation of BITWISE flag mask | 8 - unfixable |
| HISTORY |  1 - bad pixels | 8 - unfixable |
| HISTORY |  2 - cosmic ray | 8 - unfixable |
| HISTORY |  4 - saturated | 8 - unfixable |
| HISTORY |  8 - unfixable | 8 - unfixable |



### HDU4: 
migration: Intro info not in database. Needs update

#### HDU Type: IMAGE
#### HDU Size:  16 MB

##### Header Table Caption for HDU4
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE |  |
| BITPIX | -32 |  |
| NAXIS | 2 |  |
| NAXIS1 | 2048 |  |
| NAXIS2 | 2048 |  |
| PCOUNT | 0 |  |
| GCOUNT | 1 |  |
| CTYPE1 | Pixel | migration: description of keyword/column not found. Needs update |
| CTYPE2 | Pixel | migration: description of keyword/column not found. Needs update |
| BUNIT | Persistence correction (ADU) | migration: description of keyword/column not found. Needs update |


