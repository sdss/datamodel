# Data Model: apFlat


migration: needs update


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDU List](#example-hdu-list)


---

## Basic Information
apFlat files contain calibration data about the relative response of the different pixels
in each detector. They are constructed from multiple frames of a continuum lamp, taken
at different collimator dither positions.
The multiextension FITS file contains:
<pre>
HDU0: master header
HDU1: flat field image (ADU) [FLOAT]: 2048x2048
HDU2: flag mask [INT*2]
HDU3: smoothed flat image [FLOAT]
</pre>

### Naming Convention
apFlat-[abc]-ID8.fits
where ID8 is the ID8 number of the first image used to construct the flat

### Releases
DR10, DR12, DR11, DR13, DR14, DR15, DR16, WORK

### Enviroments
APOGEE_REDUX

### Approximate Size
20 MB

### File Type
FITS

### Generated by Product
migration: not in database. Needs update

### HDU List for release WORK
  - [HDU0: PRIMARY](#hdu0-primary)
  - [HDU1: ](#hdu1-)
  - [HDU2: ](#hdu2-)
  - [HDU3: ](#hdu3-)


---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another
 - WORK
   - from: DR16
   - note: No changes
 - DR16
   - from: DR15
   - note: No changes
 - DR15
   - from: DR14
   - note: No changes
 - DR14
   - from: DR13
   - note: No changes
 - DR13
   - from: DR11
   - primary_delta_nkeys: 1
   - removed_primary_header_kwargs: ['CHECKSUM']
 - DR11
   - from: DR12
   - note: No changes
 - DR12
   - from: DR10
   - note: No changes

---
## Example HDU List


### HDU0: PRIMARY
<b>
Example header:
</b>

#### HDU Type: IMAGE
#### HDU Size:  0 bytes

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | conforms to FITS standard |
| BITPIX | 16 | array data type |
| NAXIS | 0 | number of array dimensions |
| EXTEND | True |  |
| INTDELAY | 0.1 | migration: description of keyword/column not found. Needs update |
| DATE-OBS | 2012-04-20T02:52:19.107 | migration: description of keyword/column not found. Needs update |
| TIMESYS | UTC | migration: description of keyword/column not found. Needs update |
| NFRAMES | 60 | migration: description of keyword/column not found. Needs update |
| INTOFF | 10647 | migration: description of keyword/column not found. Needs update |
| EXPTIME | 638.9200000000001 | migration: description of keyword/column not found. Needs update |
| FILENAME | /data-ql/data/56037/apRaw-04750009-001.fits | migration: description of keyword/column not found. Needs update |
| IMAGETYP | InternalFlat | migration: description of keyword/column not found. Needs update |
| FULLX | 8192 | migration: description of keyword/column not found. Needs update |
| FULLY | 2048 | migration: description of keyword/column not found. Needs update |
| BEGX | 1 | migration: description of keyword/column not found. Needs update |
| BEGY | 1 | migration: description of keyword/column not found. Needs update |
| BINX | 1 | migration: description of keyword/column not found. Needs update |
| BINY | 1 | migration: description of keyword/column not found. Needs update |
| ACAMREV | UVA-Astrocam v1.2r55 | migration: description of keyword/column not found. Needs update |
| OBSCMNT | None | migration: description of keyword/column not found. Needs update |
| LKSHPWR | 0.0 | migration: description of keyword/column not found. Needs update |
| TDETTOP | 74.136 | migration: description of keyword/column not found. Needs update |
| TDETBASE | 74.832 | migration: description of keyword/column not found. Needs update |
| COLPITCH | 5.817 | migration: description of keyword/column not found. Needs update |
| TTENTTOP | 82.856 | migration: description of keyword/column not found. Needs update |
| COLLM3 | 2377.976 | migration: description of keyword/column not found. Needs update |
| TCLDPMID | 77.632 | migration: description of keyword/column not found. Needs update |
| COLLM2 | 2354.858 | migration: description of keyword/column not found. Needs update |
| COLLM1 | 2494.161 | migration: description of keyword/column not found. Needs update |
| TGETTER | 76.239 | migration: description of keyword/column not found. Needs update |
| TTLMBRD | 300.685 | migration: description of keyword/column not found. Needs update |
| TLSOUTH | 76.113 | migration: description of keyword/column not found. Needs update |
| TLNORTH | 76.744 | migration: description of keyword/column not found. Needs update |
| TLSCAM2 | 79.008 | migration: description of keyword/column not found. Needs update |
| TLSCAM1 | 78.996 | migration: description of keyword/column not found. Needs update |
| TLSDETC | 74.775 | migration: description of keyword/column not found. Needs update |
| TLSDETB | 73.813 | migration: description of keyword/column not found. Needs update |
| TPGVAC | 5.4e-07 | migration: description of keyword/column not found. Needs update |
| LN2CNTRL | 0.0 | migration: description of keyword/column not found. Needs update |
| TCAMAFT | 77.817 | migration: description of keyword/column not found. Needs update |
| TCAMMID | 78.67 | migration: description of keyword/column not found. Needs update |
| COLLYAW | 17.413 | migration: description of keyword/column not found. Needs update |
| TCAMFWD | 78.396 | migration: description of keyword/column not found. Needs update |
| TEMPVPH | 78.256 | migration: description of keyword/column not found. Needs update |
| TRADSHLD | 87.4 | migration: description of keyword/column not found. Needs update |
| TCOLLIM | 78.534 | migration: description of keyword/column not found. Needs update |
| TCPCORN | 79.662 | migration: description of keyword/column not found. Needs update |
| TCLDPHNG | 79.508 | migration: description of keyword/column not found. Needs update |
| COLLPIST | 2401.243 | migration: description of keyword/column not found. Needs update |
| DITHPIX | 12.994 | migration: description of keyword/column not found. Needs update |
| RELHUM | 11.117 | migration: description of keyword/column not found. Needs update |
| LN2LEVEL | 92.905 | migration: description of keyword/column not found. Needs update |
| MKSVAC | 5.63e-07 | migration: description of keyword/column not found. Needs update |
| OBJECT | ObjName | migration: description of keyword/column not found. Needs update |
| FILTER1 | FILTER | migration: description of keyword/column not found. Needs update |
| ICSREV | APOGEE ICS2.0r033 | migration: description of keyword/column not found. Needs update |
| DSPFILE | UNKNOWN | migration: description of keyword/column not found. Needs update |
| TELESCOP | SDSS 2-5m | migration: description of keyword/column not found. Needs update |
| EXPTYPE | INTERNALFLAT | migration: description of keyword/column not found. Needs update |
| LAMPQRTZ | 0 | migration: description of keyword/column not found. Needs update |
| LAMPUNE | 0 | migration: description of keyword/column not found. Needs update |
| LAMPTHAR | 0 | migration: description of keyword/column not found. Needs update |
| LAMPSHTR | 0 | migration: description of keyword/column not found. Needs update |
| LAMPCNTL | 1 | migration: description of keyword/column not found. Needs update |
| SEEING | 1.40127 | migration: description of keyword/column not found. Needs update |
| FF | 0 0 0 0 | migration: description of keyword/column not found. Needs update |
| NE | 0 0 0 0 | migration: description of keyword/column not found. Needs update |
| HGCD | 0 0 0 0 | migration: description of keyword/column not found. Needs update |
| FFS | 1 1 1 1 1 1 1 1 | migration: description of keyword/column not found. Needs update |
| OBJSYS | Mount | migration: description of keyword/column not found. Needs update |
| RA | NaN | migration: description of keyword/column not found. Needs update |
| DEC | NaN | migration: description of keyword/column not found. Needs update |
| RADEG | NaN | migration: description of keyword/column not found. Needs update |
| DECDEG | NaN | migration: description of keyword/column not found. Needs update |
| ROTPOS | 0.0 | migration: description of keyword/column not found. Needs update |
| BOREOFFX | 0.0 | migration: description of keyword/column not found. Needs update |
| BOREOFFY | 0.0 | migration: description of keyword/column not found. Needs update |
| ARCOFFX | 0.0 | migration: description of keyword/column not found. Needs update |
| ARCOFFY | 0.0 | migration: description of keyword/column not found. Needs update |
| OBJOFFX | 0.0 | migration: description of keyword/column not found. Needs update |
| OBJOFFY | 0.0 | migration: description of keyword/column not found. Needs update |
| CALOFFX | 0.0 | migration: description of keyword/column not found. Needs update |
| CALOFFY | 0.0 | migration: description of keyword/column not found. Needs update |
| CALOFFR | 0.0 | migration: description of keyword/column not found. Needs update |
| GUIDOFFX | 0.0 | migration: description of keyword/column not found. Needs update |
| GUIDOFFY | 0.0 | migration: description of keyword/column not found. Needs update |
| GUIDOFFR | 0.0 | migration: description of keyword/column not found. Needs update |
| AZ | 121.0 | migration: description of keyword/column not found. Needs update |
| ALT | 30.0 | migration: description of keyword/column not found. Needs update |
| IPA | 0.0 | migration: description of keyword/column not found. Needs update |
| FOCUS | 0.0 | migration: description of keyword/column not found. Needs update |
| M2PISTON | 1256.97 | migration: description of keyword/column not found. Needs update |
| M2XTILT | 12.89 | migration: description of keyword/column not found. Needs update |
| M2YTILT | 8.04 | migration: description of keyword/column not found. Needs update |
| M2XTRAN | -60.36 | migration: description of keyword/column not found. Needs update |
| M2YTRAN | 174.76 | migration: description of keyword/column not found. Needs update |
| M1PISTON | 0.0 | migration: description of keyword/column not found. Needs update |
| M1XTILT | 0.0 | migration: description of keyword/column not found. Needs update |
| M1YTILT | 0.0 | migration: description of keyword/column not found. Needs update |
| M1XTRAN | 612.43 | migration: description of keyword/column not found. Needs update |
| M1YTRAN | 1325.18 | migration: description of keyword/column not found. Needs update |
| SCALE | 1.0 | migration: description of keyword/column not found. Needs update |
| NAME | 5847-56036-01 | migration: description of keyword/column not found. Needs update |
| PLATEID | 5847 | migration: description of keyword/column not found. Needs update |
| CARTID | 12 | migration: description of keyword/column not found. Needs update |
| MAPID | 1 | migration: description of keyword/column not found. Needs update |
| POINTING | A | migration: description of keyword/column not found. Needs update |
| COMMENT | failed to make SPA card from None | migration: description of keyword/column not found. Needs update |
| CHIP | c | migration: description of keyword/column not found. Needs update |
| NREAD | 60 | migration: description of keyword/column not found. Needs update |
| V_APRED | 0.17.14 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Sat Jan 23 10:14:47 2021 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: u0914351 on kp121 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: IDL 8.4 linux x86_64 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:  APOGEE Reduction Pipeline Version: 0.17.14 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Output File: | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:  HDU1 - image (ADU) | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:  HDU2 - error (ADU) | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:  HDU3 - flag mask | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:         1 - bad pixels | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:         2 - cosmic ray | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:         4 - saturated | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D:         8 - unfixable | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Global fractional variability = 0.000 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: DETECTOR file="/uufs/chpc.utah.edu/common/home/sdss/apogeework/apo | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: gee/spectro/redux/dr17/cal/detector/apDetector-c-11870003.fits" | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Dark Current Correction file="/uufs/chpc.utah.edu/common/home/sdss | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: /apogeework/apogee/spectro/redux/dr17/cal/darkcorr/apDark-c-129100 | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: 32709 pixels are bad | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: 0 pixels have cosmic rays | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Cosmic Rays FIXED | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: 2235 pixels are saturated | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: 202 saturated pixels FIXED | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: 2033 pixels are unfixable | migration: description of keyword/column not found. Needs update |
| HISTORY | AP3D: Fowler Sampling, Nfowler=1 | migration: description of keyword/column not found. Needs update |
| UT-MID | 2012-04-20T02:57:38.6 | migration: description of keyword/column not found. Needs update |
| JD-MID | 2456037.62336 | migration: description of keyword/column not found. Needs update |
| HISTORY | APMKFLAT: Sat Jan 23 10:35:49 2021 | migration: description of keyword/column not found. Needs update |
| HISTORY | APMKFLAT: u0914351 on kp121 | migration: description of keyword/column not found. Needs update |
| HISTORY | APMKFLAT: IDL 8.4 linux x86_64 | migration: description of keyword/column not found. Needs update |
| HISTORY | APMKFLAT:  APOGEE Reduction Pipeline Version: 0.17.14 | migration: description of keyword/column not found. Needs update |



### HDU1: 
<b>
Example header:
</b>

#### HDU Type: IMAGE
#### HDU Size:  16 MB

##### Header Table Caption for HDU1
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 2048 | length of dimension 1 |
| NAXIS2 | 2048 | length of dimension 2 |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |



### HDU2: 
<b>
Example header:
</b>

#### HDU Type: IMAGE
#### HDU Size:  16 MB

##### Header Table Caption for HDU2
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | array data type |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 2048 | length of dimension 1 |
| NAXIS2 | 2048 | length of dimension 2 |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |



### HDU3: 
<b>
Example header:
</b>

#### HDU Type: IMAGE
#### HDU Size:  4 MB

##### Header Table Caption for HDU3
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | 8 | array data type |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 2048 | length of dimension 1 |
| NAXIS2 | 2048 | length of dimension 2 |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |


