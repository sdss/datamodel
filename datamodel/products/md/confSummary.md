# Data Model: confSummary_test


File describing the targeting and parameters used to generate a configuration.


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example PAR List](#example-par-list)
- [Notes](#notes)

---

## Basic Information
This file describes a Focal Plane System (FPS) configuration, including coordinates and targeting information for each object assigned to a robotic fibre positioner, as well as environmental and input parameters (ambient temperature, focal scale, etc.) A "configuration" is the realisation of an FPS "design". While a design lists the assignments of targets to positioners, a configuration includes the actual coordinates (alpha, beta) sent to the positioners at the time of observation. These coordinates differ from the design coordinates due to the effects of atmospheric refraction, disabled positioners, focal plane scale, etc. The FIBERMAP table also includes the estimated, on-sky coordinates for each of the three fibres (IR, optical, metrology) on each positioner.
The configuration ID is assigned sequentially at the time of observation. APO configuration IDs start at 1 while LCO start at 10,000,000.
Although it has an almost identical format, this product should not be confused with the confSummaryF files, which include the measured positions of the fibre positioners on the focal plane using the Field View Camera (FVC).

### Naming Convention
$SDSSCORE_DIR/[OBS]/summary_files/[CONFIGSUBMODULE]/[CONFIGGRP]/confSummary-[CONFIGID].par where $SDSSCORE_DIR is the environment variable pointing to the directory where the sdsscore GitHub repository has been checked out, [CONFIGID] is the configuration identifier (a sequential integer assigned at the time of observation, e.g., 14800), [OBS] is the observatory (apo or lco), [CONFIGSUBMODULE] is a grouping of one thousand configurations (e.g., 014XXX), and [CONFIGGRP] is a grouping of one hundred configurations (e.g., 0148XX).

### Releases
WORK

### Enviroments
SDSSCORE_DIR

### Approximate Size
508 KB

### File Type
PAR

### Generated by Product
jaeger

### Is a VAC
False

### PAR List for release WORK
  - [FIBERMAP](#FIBERMAP)

---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another

---
## Example PAR List
### Comments
```
#%yanny
#
# confSummary-14800.par
#
# Created by pydl.pydlutils.yanny.yanny
#
# 2024-06-07 23:03:44 UTC
#
```

### Header

Key | Value | Comment | |
| --- | --- | --- | --- |
| configuration_id | 14800 | The configuration ID. Matches the file ID. |
| robostrategy_run | eta-8 | Run of Robostrategy that generated this design, or "manual" for a manual design. |
| fps_calibrations_version | 2024.04.01+91998f8 | Version of FPS calibrations used. |
| jaeger_version | 1.7.4 | Version of the jaeger product that generated this file. |
| coordio_version | 1.11.2 | Version of the coordio product used for coordinate transformations. |
| kaiju_version | 1.4.0 | Version of Kaiju used to generate positioner trajectory paths. |
| design_id | -999 | The design ID associated with this configuration. |
| field_id | -999 | The field ID that defines the pointing. |
| focal_scale | 1.0 | Focal scale factor used to generate this configuration. |
| instruments | BOSS APOGEE | Instruments used (always APOGEE and BOSS). |
| epoch | 2460469.460922406 | JD at which the configuration was generated. |
| obstime | Fri Jun 07 23:03:44 2024 | TAI date of the observation (matches epoch). |
| MJD | 60469 | MJD of the observation in the SDSS style. |
| observatory | APO | Observatory where this configuration was generated. |
| temperature | 19.6 | Temperature at the time of the observation. |
| raCen | -999.0 | Field centre right ascension. |
| decCen | -999.0 | Field centre declination. |
| pa | -999.0 | Field position angle. |
| is_dithered | 0 | Whether this is a dithered configuration from a base configuration. |
| parent_configuration | -999 | If is_dithered=1 the parent configuration used to generate the dither. |
| dither_radius | -999.0 | If is_dithered=1 the radius, in mm, for the uniform distribution around the original position. |
| cloned_from | -999 | If this configuration was cloned from another, the configuration ID of the parent. |


### Tables


#### FIBERMAP
- Description: A table with information for each one of the fibres on the focal plane, grouped by positioner.
- Number of Rows: 1500

#### Structure
Name | Type | Unit | Description | Is Array | Example |
| --- | --- | --- | --- | --- | --- |
 | positionerId | short | N/A | The robotic fibre positioner identifier. | False | 3 |
 | holeId | char[28] | N/A | Hole identifier in which the positioner is located. | False | R-1C14 |
 | fiberType | FIBERTYPE | N/A | Type of fibre in this entry (APOGEE, BOSS, or Metrology). | False | APOGEE |
 | assigned | short | N/A | Whether this fibre was assigned to a target in the design (only one of the science fibres in a positioner can have assigned=1). | False | 0 |
 | on_target | short | N/A | Whether this fibre is on target. A fibre can be "assigned" but not "on_target" for a number of reasons (e.g., the positioner is not working, a collision required the positioner to be moved, etc.) | False | 0 |
 | valid | short | N/A | Whether the alpha and beta angles are valid. Do not use targets with valid=0. | False | 1 |
 | decollided | short | N/A | Whether this positioner had to be moved to decollide it. This should also mean (on_target=0). | False | 0 |
 | too | short | N/A | Whether this entry is a target of opportunity (ToO). In this case the ToO replaced one of the initial science target assigned by robostrategy. The too entry was introduced in confSummary 14461 at APO and 10007788 at LCO. | False | 0 |
 | xwok | double | mm | The X wok coordinate, measured from the centre of the wok. At APO these coordinates are only available starting on MJD 59584. | False | 12.024996035323891 |
 | ywok | double | mm | The Y wok coordinate. | False | -11.846245609609129 |
 | zwok | double | mm | The Z wok coordinate. | False | 143.1 |
 | xFocal | double | mm | The X focal plane coordinate. While the focal coordinates are very similar to the wok coordinates, they are not identical since the wok shape does not exactly match the focal plane. | False | 12.022831536037533 |
 | yFocal | double | mm | The Y focal plane coordinate. | False | -11.8441132853994 |
 | alpha | float | degrees | The configured angle of the alpha arm of the positioner. alpha and beta should be the same of all the fibres associated with the same positioner. | False | 9.990766525268555 |
 | beta | float | degrees | The configured angle of the beta arm of the positioner. | False | 170.00279235839844 |
 | racat | double | degrees | The ICRS right ascension of the target as recorded in `catalogdb.catalog`, at coord_epoch. | False | -999.0 |
 | deccat | double | degrees | The ICRS declination of the target. | False | -999.0 |
 | pmra | float | mas/year | Right ascension proper motion from `catalogdb.catalog`. This is a real, on-sky angle (i.e., the cosine of the declination is included). | False | -999.0 |
 | pmdec | float | mas/year | Declination proper motion. | False | -999.0 |
 | parallax | float | mas | The parallax of the target. | False | -999.0 |
 | ra | double | degrees | The ICRS right ascension of the fibre projected on the sky at the epoch of the observation. | False | -999.0 |
 | dec | double | degrees | The ICRS declination of the fibre projected on the sky at the epoch of the observation. | False | -999.0 |
 | ra_observed | double | degrees | The observed right ascension of the fibre projected on the sky after correcting for atmospheric refraction. All the _observed columns were first introduced in confSummary 13989 at APO and 10007788 at LCO. | False | -999.0 |
 | dec_observed | double | degrees | The observed declination of the fibre projected on the sky after correcting for atmospheric refraction. | False | -999.0 |
 | alt_observed | double | degrees | The observed altitude of the fibre projected on the sky after correcting for atmospheric refraction. | False | -999.0 |
 | az_observed | double | degrees | The observed azimuth of the fibre projected on the sky after correcting for atmospheric refraction. | False | -999.0 |
 | lambda_design | float | Angstrom | The wavelength at which the target was designed to be observed. This value affects the refraction correction. | False | -999.0 |
 | lambda_eff | float | Angstroms | The effective wavelength at which the target was observed. | False | 16600.0 |
 | coord_epoch | float | years | The epoch of the coordinates in `catalogdb.catalog` | False | -999.0 |
 | spectrographId | short | N/A | The spectrograph to which this fibre is connected to. 0 for BOSS, 1 for APOGEE. | False | 2 |
 | fiberId | short | N/A | Fiber ID for the spectrograph to which the fibre is assigned. | False | 214 |
 | mag | float[5] | map | [u, g, r, i, z] optical magnitudes. | True | [-999.0, -999.0, -999.0, -999.0, -999.0] |
 | optical_prov | char[120] | N/A | The source of the optical magnitudes. | False |  |
 | bp_mag | float | mag | Gaia BP magnitude. | False | -999.0 |
 | gaia_g_mag | float | mag | Gaia G magnitude. | False | -999.0 |
 | rp_mag | float | mag | Gaia RP magnitude. | False | -999.0 |
 | h_mag | float | mag | 2MASS H magnitude. | False | -999.0 |
 | catalogid | long | N/A | The catalogid of this target in `catalogdb.catalog`. | False | -999 |
 | carton_to_target_pk | long | N/A | The carton_to_target_pk of this target in `targetdb.carton_to_target`. | False | -999 |
 | cadence | char[400] | N/A | Cadence identifier. | False |  |
 | firstcarton | char[400] | N/A | Main carton from which this target was drawn. | False |  |
 | program | char[400] | N/A | Program for "firstcarton". Entry in targetdb.carton. | False |  |
 | category | char[400] | N/A | Category for "firstcarton". Entry in targetdb.category associated with the carton. | False |  |
 | sdssv_boss_target0 | long | N/A | Legacy column never used. Ignore. | False | 0 |
 | sdssv_apogee_target0 | long | N/A | Legacy column never used. Ignore. | False | 0 |
 | delta_ra | double | arcsec | Custom offset in right ascension applied to this target. Note that "ra", "dec", and the "_observed" coordinates do take this offset into account. | False | 0.0 |
 | delta_dec | double | arcsec | Custom offset in declination applied to this target. | False | 0.0 |


---
## Notes
None