# Data Model: aspcapField


migration: needs update


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDU List](#example-hdu-list)


---

## Basic Information
aspcapField files summarize the ASPCAP results for all stars in a given field.

### Naming Convention
<code>aspcapField-LOCATION_ID.fits</code>

### Releases
DR16

### Enviroments
APOGEE_ROOT

### Approximate Size
38 MB

### File Type
FITS

### Generated by Product
idlwrap (aspcap_writefits)

### HDU List for release DR16
  - [HDU0: PRIMARY](#hdu0-primary)
  - [HDU1: ](#hdu1-)
  - [HDU2: ](#hdu2-)
  - [HDU3: ](#hdu3-)


---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another

---
## Example HDU List


### HDU0: PRIMARY


#### HDU Type: IMAGE
#### HDU Size:  0 bytes

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | conforms to FITS standard |
| BITPIX | 16 | array data type |
| NAXIS | 0 | number of array dimensions |
| EXTEND | True |  |
| DATE | 2019-06-20 | Creation UTC (CCCC-MM-DD) date of FITS header |
| COMMENT | FITS (Flexible Image Transport System) format is defined in 'Astronomy | migration: description of keyword/column not found. Needs update |
| COMMENT | and Astrophysics', volume 376, page 359; bibcode 2001A&A...376..359H | migration: description of keyword/column not found. Needs update |
| IDLVER | 8.4 linux x86_64 | IDL Version |
| APOGEE | 0.14.11 | migration: description of keyword/column not found. Needs update |
| HISTORY | ASPCAPThe data are in separate extensions: | migration: description of keyword/column not found. Needs update |
| HISTORY | ASPCAP HDU0 = Header only | migration: description of keyword/column not found. Needs update |
| HISTORY | ASPCAP HDU1 - Table with stellar data and ASPCAP parameters | migration: description of keyword/column not found. Needs update |
| HISTORY | ASPCAP HDU2 - Table with ASPCAP spectra, etc. | migration: description of keyword/column not found. Needs update |
| HISTORY | ASPCAP HDU3 - Table with parameter names, wavelength array | migration: description of keyword/column not found. Needs update |



### HDU1: 
Contains ASPCAP results for all stars in field

#### HDU Type: BINARY TABLE
#### HDU Size:  861 KB

##### Binary Table Caption for HDU1
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | FILE | char[29] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | RED_VERS | char[7] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | TELESCOPE | char[8] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | FIELD | char[8] | migration: unit of keyword/column not found. Needs update | Character field name |
 | LOCATION_ID | int32 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | APOGEE_ID | char[18] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | RA | float64 | degrees | Right ascension (J2000) |
 | DEC | float64 | degrees | Declination (J2000) |
 | GLON | float64 | degrees | Galactic longitude |
 | GLAT | float64 | degrees | Galactic latitude |
 | J | float32 | migration: unit of keyword/column not found. Needs update | 2MASS J magitude |
 | H | float32 | migration: unit of keyword/column not found. Needs update | 2MASS H magnitude |
 | K | float32 | migration: unit of keyword/column not found. Needs update | 2MASS Ks magnitude |
 | AK_TARG | float32 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | AK_TARG_METHOD | char[9] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | AK_WISE | float32 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | SFD_EBV | float32 | migration: unit of keyword/column not found. Needs update | Reddening from SFD maps |
 | APOGEE_TARGET1 | int32 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | APOGEE_TARGET2 | int32 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | APOGEE_TARGET3 | int32 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | TARGFLAGS | char[31] | migration: unit of keyword/column not found. Needs update | Targeting flags in english |
 | SURVEY | char[8] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | STARFLAG | int32 | migration: unit of keyword/column not found. Needs update | Star level flag from OR of individual visit flags, see <a href="http://www.sdss.org/dr13/algorithms/bitmasks/#APOGEE_STARFLAG"> bitmask definition</a> |
 | ANDFLAG | int32 | migration: unit of keyword/column not found. Needs update | Star level flag from AND of individual visit flags, see <a href="http://www.sdss.org/dr13/algorithms/bitmasks/#APOGEE_STARFLAG"> bitmask definition</a> |
 | SNR | float32 | migration: unit of keyword/column not found. Needs update | Median signal-to-noise |
 | SNREV | float32 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | VRAD | float32 | migration: unit of keyword/column not found. Needs update | Radial velocity scale of spectrum (=0!) |
 | VHELIO | float32 | migration: unit of keyword/column not found. Needs update | Average heliocentric radial velocity of star |
 | VSCATTER | float32 | migration: unit of keyword/column not found. Needs update | Scatter of RVs from individual visits |
 | VERR | float32 | migration: unit of keyword/column not found. Needs update | Median error of individual visit RV errors |
 | NVISITS | int16 | migration: unit of keyword/column not found. Needs update | Number of visits in combined spectrum |
 | VISIT | int16 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | RV_CCFWHM | float32 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | RV_AUTOFWHM | float32 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | MEANFIB | float32 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | SIGFIB | float32 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | VISITFILES | char[96] | migration: unit of keyword/column not found. Needs update | Names of visit files that went into combined spectrum |
 | CLASS | char[5] | migration: unit of keyword/column not found. Needs update | Best matching ASPCAP library class |
 | PARAM | float32[9] | migration: unit of keyword/column not found. Needs update | Output array of fit parameters, with empirical corrections applied, in order T<sub>eff</sub>, log g, log vmicro, [M/H], [C/M], [N/M], [α/M] |
 | PARAM_COV | float32[81] | migration: unit of keyword/column not found. Needs update | Output matrix of covariances, with empirical corrections applied |
 | FPARAM | float32[9] | migration: unit of keyword/column not found. Needs update | Output array of fit parameters, in order T<sub>eff</sub>, log g, log vmicro, [M/H], [C/M], [N/M], [α/M] |
 | FPARAM_COV | float32[81] | migration: unit of keyword/column not found. Needs update | Output array of fit covariances |
 | PARAMFLAG | int32[9] | migration: unit of keyword/column not found. Needs update | Bitwise flag for individual parameters, see <a href="http://www.sdss.org/dr13/algorithms/bitmasks/#APOGEE_PARAMFLAG"> bitmask definition</a> |
 | PARAM_CHI2 | float32 | migration: unit of keyword/column not found. Needs update | Chi^2 of best fit |
 | ASPCAPFLAG | int32 | migration: unit of keyword/column not found. Needs update | Summary ASPCAP flag for star, see <a href="http://www.sdss.org/dr13/algorithms/bitmasks/#APOGEE_ASPCAPFLAG"> bitmask definition</a> |
 | NDIM | int16 | migration: unit of keyword/column not found. Needs update | FERRE input: Number of parameters in library |
 | NOV | int16 | migration: unit of keyword/column not found. Needs update | FERRE input: Number of parameters fit |
 | INDV | int16[9] | migration: unit of keyword/column not found. Needs update | FERRE input: Indices of fit parameters |
 | NRUNS | int16 | migration: unit of keyword/column not found. Needs update | FERRE input: Number of ASPCAP runs per star |
 | INIT | int16 | migration: unit of keyword/column not found. Needs update | FERRE input: Initial parameter values |
 | INDINI | int16[9] | migration: unit of keyword/column not found. Needs update | FERRE input: Index to set where initial parameters start |
 | INTER | int16 | migration: unit of keyword/column not found. Needs update | FERRE input: interpolation order |
 | NTHREADS | int16 | migration: unit of keyword/column not found. Needs update | FERRE input: number of threads to use |
 | PCAPROJECT | int16 | migration: unit of keyword/column not found. Needs update | FERRE input: PCA used? |
 | PCACHI | int16 | migration: unit of keyword/column not found. Needs update | FERRE input: PCA used? |
 | F_FORMAT | int16 | migration: unit of keyword/column not found. Needs update | FERRE input: flag for format of input files (formatted vs unformatted) |
 | F_ACCESS | int16 | migration: unit of keyword/column not found. Needs update | FERRE input: flag for format of input files (formatted vs unformatted) |
 | ALGOR | int16 | migration: unit of keyword/column not found. Needs update | FERRE input |
 | MONO | int16 | migration: unit of keyword/column not found. Needs update | FERRE input |
 | LSF | int16 | migration: unit of keyword/column not found. Needs update | FERRE input |
 | ERRBAR | int16 | migration: unit of keyword/column not found. Needs update | FERRE input |
 | FILTERFILE | char[116] | migration: unit of keyword/column not found. Needs update | FERRE input |
 | BADFRAC | float32 | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | FPARAM_CLASS | float32[198] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | CHI2_CLASS | float32[22] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | FELEM | float32[26] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | FELEM_ERR | float32[26] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | FELEM_CAL | float32[26] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | FELEM_CAL_ERR | float32[26] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | ELEM | float32[26] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | ELEM_ERR | float32[26] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | X_H | float32[26] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | X_H_ERR | float32[26] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | X_M | float32[26] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | X_M_ERR | float32[26] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | ELEM_CHI2 | float32[26] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | ELEMFLAG | int16[26] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |



### HDU2: 
Contains normalized spectra, errors, pseudo-continuum, and best-fit synthetic spectrum for all stars in field
This HDU has no non-standard required keywords.

#### HDU Type: BINARY TABLE
#### HDU Size:  37 MB

##### Binary Table Caption for HDU2
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | SPEC | float32[7514] | migration: unit of keyword/column not found. Needs update | Pseudo-continuum normalized spectra |
 | ERR | float32[7514] | migration: unit of keyword/column not found. Needs update | Uncertainties in spectra |
 | SPEC_BESTFIT | float32[7514] | migration: unit of keyword/column not found. Needs update | Best fit spectrum from FERRE |
 | PSEUDO_CONTINUUM | float32[7514] | migration: unit of keyword/column not found. Needs update | Pseudo continuum used for normalization |
 | GRID | char[33] | migration: unit of keyword/column not found. Needs update | Name of spectral library grid |
 | ATOMLINELIST | char[7] | migration: unit of keyword/column not found. Needs update | Name of atomic linelist used for library |
 | MOLECLINELIST | char[7] | migration: unit of keyword/column not found. Needs update | Name of molecular linelist used for library |
 | ELEM_MASK | int32[7514] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |



### HDU3: 
Contains data common to all spectra

#### HDU Type: BINARY TABLE
#### HDU Size:  59 KB

##### Binary Table Caption for HDU3
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | NPIX | int32 | migration: unit of keyword/column not found. Needs update | Number of pixels in the spectra |
 | PARAM_SYMBOL | char[135] | migration: unit of keyword/column not found. Needs update | Names of the fit parameters |
 | WAVE | float64[7514] | migration: unit of keyword/column not found. Needs update | Wavelength array for spectra (10^WAVE, Angstroms) |
 | WAVEMIN | float64[3] | migration: unit of keyword/column not found. Needs update | Minimum wavelengths for each chip |
 | WAVEMAX | float64[3] | migration: unit of keyword/column not found. Needs update | Maximum wavelengths for each chip |
 | CLASSES | char[132] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | ELEM_SYMBOL | char[104] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | ELEM_VALUE | char[208] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |
 | ELEMTOH | int16[31] | migration: unit of keyword/column not found. Needs update | migration: description of keyword/column not found. Needs update |


