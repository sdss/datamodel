# Data Model: spFluxcalib


The Flux Calibration image


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDUS List](#example-hdus-list)
- [Notes](#notes)
- [Regrets](#regrets)
---

## Basic Information
Contains the calibration vectors for a given frame

### Naming Convention
with $BOSS_SPECTRO_REDUX/[RUN2D]/[FIELD]/spFluxcalib-[BR][ID]-[FRAME].fits.gz

### Releases
DR16, DR17, DR18, IPL3, DR19

### Enviroments
BOSS_SPECTRO_REDUX

### Approximate Size
16 MB

### File Type
FITS

### Generated by Product
idlspec2d - rm_spflux_v5.pro

### Is a VAC
False

### Data Level
0.0.0

### HDUS List for release DR19
  - [HDU0: PRIMARY](#hdu0-primary)
  - [HDU1](#hdu1)
  - [HDU2](#hdu2)
  - [HDU3](#hdu3)
  - [HDU4](#hdu4)

---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another
 - DR19
   - from: IPL3
   - note: No changes
 - IPL3
   - from: DR18
   - note: No changes
 - DR18
   - from: DR17
   - note: No changes
 - DR17
   - from: DR16
   - note: No changes

---
## Example HDUS List

### HDU0: PRIMARY
Image with the flux calibration vector for each fiber.

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | Primary Header created by MWRFITS v1.13 |
| BITPIX | -32 |  |
| NAXIS | 2 |  |
| NAXIS1 | 4112 |  |
| NAXIS2 | 500 |  |
| EXTEND | True | Extensions may be present |
| WAVEMIN | 3559.19 |  |
| WAVEMAX | 6317.02 |  |



### HDU1: 
Binary table with traceset structure of b-spline fits for calibration vectors. This is a compact version of the information in the primary HDU.

#### HDU Type: BINARY TABLE
#### HDU Size:  3 KB

##### Header Table Caption for HDU1
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | Binary table written by MWRFITS v1.13 |
| BITPIX | 8 | Required value |
| NAXIS | 2 | Required value |
| NAXIS1 | 3256 | Number of bytes per row |
| NAXIS2 | 1 | Number of rows |
| PCOUNT | 0 | Normally 0 (no varying arrays) |
| GCOUNT | 1 | Required value |
| TFIELDS | 5 | Number of columns in table |
| COMMENT |  |  |
| COMMENT |  *** End of mandatory fields *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column formats *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column names *** |  |
| COMMENT |  |  |

##### Binary Table Caption for HDU1
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | FULLBKPT | float32[234] |  | Breakpoint vector |
 | BKMASK | int16[234] |  | mask of the breakpoint vector |
 | NORD | int32 |  | Number of orders for Bspline fit |
 | COEFF | float32[231] |  | The bspline coeffients |
 | ICOEFF | float32[231] |  | inversion bspline coeffients |



### HDU2: 
Binary table with information about the standard stars used to construct the calibration vector.

#### HDU Type: BINARY TABLE
#### HDU Size:  5 MB

##### Header Table Caption for HDU2
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | Binary table written by MWRFITS v1.13 |
| BITPIX | 8 | Required value |
| NAXIS | 2 | Required value |
| NAXIS1 | 82629 | Number of bytes per row |
| NAXIS2 | 70 | Number of rows |
| PCOUNT | 0 | Normally 0 (no varying arrays) |
| GCOUNT | 1 | Required value |
| TFIELDS | 21 | Number of columns in table |
| COMMENT |  |  |
| COMMENT |  *** End of mandatory fields *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column formats *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column names *** |  |
| COMMENT |  |  |

##### Binary Table Caption for HDU2
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | PLATE | int32 |  | SDSS PlateID |
 | MJD | int32 |  | MJD of observation |
 | FIBERID | int32 |  | Fiber of observation |
 | QGOOD | int16 |  | quality flag |
 | MODEL | char[3] |  | Model Name |
 | G | float32 | cm/s^2 | surface gravity |
 | TEFF | float32 | K | Effective Temperature |
 | FEH | float32 | solar | metallicity |
 | IMODEL | int32 |  | index of model |
 | Z | float64 |  | Redshift of fit |
 | SN_MEDIAN | float32 |  | S/N of spectra |
 | CHI2 | float32 |  | Chi-square of model fit |
 | DOF | float32 |  | degrees of freedom |
 | LINESN_MEDIAN | float32 |  | S/N near absorption lines |
 | LINECHI2 | float64 |  | CHi-square of fit near absorption lines |
 | LINEDOF | float32 |  | degrees of freedom of fit near absorption lines |
 | LOGLAM | float32[4128] | log10(AA) | Log Lambda |
 | OBJFLUX | float32[4128] | nanomaggy | Flux of object |
 | MODELFLUX | float32[4128] | nanomaggy | Flux of model fit |
 | MRATIO | float32[4128] |  | MRATIO vectors are the "raw" flux-calib vectors for each expos+CCD |
 | MRATIVAR | float32[4128] |  | Ivar of MRATIO |



### HDU3: 
Binary table with traceset structure of b-spline fits for calibration vectors of all standards.

#### HDU Type: BINARY TABLE
#### HDU Size:  3 KB

##### Header Table Caption for HDU3
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | Binary table written by MWRFITS v1.13 |
| BITPIX | 8 | Required value |
| NAXIS | 2 | Required value |
| NAXIS1 | 3256 | Number of bytes per row |
| NAXIS2 | 1 | Number of rows |
| PCOUNT | 0 | Normally 0 (no varying arrays) |
| GCOUNT | 1 | Required value |
| TFIELDS | 5 | Number of columns in table |
| COMMENT |  |  |
| COMMENT |  *** End of mandatory fields *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column formats *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column names *** |  |
| COMMENT |  |  |

##### Binary Table Caption for HDU3
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | FULLBKPT | float32[234] |  | Breakpoint vector |
 | BKMASK | int16[234] |  | mask of the breakpoint vector |
 | NORD | int32 |  | Number of orders for Bspline fit |
 | COEFF | float32[231] |  | The bspline coefficients |
 | ICOEFF | float32[231] |  | inversion bspline coefficients |



### HDU4: 
Output structure

#### HDU Type: BINARY TABLE
#### HDU Size:  9 MB

##### Header Table Caption for HDU4
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | BINTABLE | Binary table written by MWRFITS v1.13 |
| BITPIX | 8 | Required value |
| NAXIS | 2 | Required value |
| NAXIS1 | 10173032 | Number of bytes per row |
| NAXIS2 | 1 | Number of rows |
| PCOUNT | 0 | Normally 0 (no varying arrays) |
| GCOUNT | 1 | Required value |
| TFIELDS | 8 | Number of columns in table |
| COMMENT |  |  |
| COMMENT |  *** End of mandatory fields *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column formats *** |  |
| COMMENT |  |  |
| COMMENT |  |  |
| COMMENT |  *** Column dimensions (2 D or greater) *** |  |
| COMMENT |  |  |
| TDIM1 | ( 4128, 1, 68) |  |
| TDIM2 | ( 4128, 1, 68) |  |
| TDIM3 | ( 4128, 1, 68) |  |
| TDIM4 | ( 4128, 1, 68) |  |
| TDIM7 | ( 2492, 500) |  |
| TDIM8 | ( 2492, 68) |  |
| COMMENT |  |  |
| COMMENT |  *** Column names *** |  |
| COMMENT |  |  |

##### Binary Table Caption for HDU4
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | THISLOGLAM | float32[280704] | log10(AA) | log lambda |
 | THISMRATIO | float32[280704] |  | MRATIO vectors are the "raw" flux-calib vectors for this expos+CCD |
 | THISMRATIVAR | float32[280704] |  | Ivar of THISMRATIVAR |
 | THISFLATARR | float32[280704] |  | polynomial fit of the object with respect to the model |
 | FRAC_SCAT | float64 |  | percental dispersion of the fluxing vectors used wrt the truth |
 | TMPLOGLAM | float64[2492] |  | output grid |
 | THISFLATARR_ALL | float32[1246000] |  | rpolynomial fit of the object with respect to the model for all star |
 | THISFLATARR_NEW | float32[169456] |  | polynomial fit of the object with respect to the model for all the std and all obj |



---
## Notes
None

---
## Regrets
I have no regrets!