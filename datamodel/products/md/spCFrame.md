# Data Model: spCFrame


migration: needs update


## Contents
- [Basic Information](#basic-information)
- [Changelog](#changelog)
- [Example HDU List](#example-hdu-list)


---

## Basic Information
The spectroscopic observations combine 3 or more exposures of 15
minutes each, each of which consists of red and blue halves.  The
combined spectra are available in the spPlate file.  The spCFrame
files contain the extracted spectra  for a single CCD (i.e., the red
or blue half) of a single exposure.    These spectra are still in the native
wavelength mapping, which is neither linear in wavelength nor log-wavelength.
However, the spectra are flux-calibrated, and deviant pixels are rejected
in the pixel mask (from the comparison with the other exposures).

### Naming Convention
 <code>spCFrame-[br][12]-[0-9]{8}\.fits</code> 

### Releases
DR9, DR10, DR12, DR11, DR13, DR14, DR15, DR16, DR17

### Enviroments
BOSS_SPECTRO_REDUX

### Approximate Size
71 MB

### File Type
FITS

### Generated by Product
spec2d (spcoadd_v5.pro)

### HDU List for release DR17
  - [HDU0: PRIMARY](#hdu0-primary)
  - [HDU1: IVAR](#hdu1-ivar)
  - [HDU2: MASK](#hdu2-mask)
  - [HDU3: WAVELENGTH](#hdu3-wavelength)
  - [HDU4: WAVEDISP](#hdu4-wavedisp)
  - [HDU5: PLUGMAP](#hdu5-plugmap)
  - [HDU6: SKY](#hdu6-sky)
  - [HDU7: X](#hdu7-x)
  - [HDU8: SUPERFLAT](#hdu8-superflat)


---

## Changelog
Describes changes to the datamodel product and/or file structure from one release to another
 - DR17
   - from: DR16
   - note: No changes
 - DR16
   - from: DR15
   - note: No changes
 - DR15
   - from: DR14
   - note: No changes
 - DR14
   - from: DR13
   - note: No changes
 - DR13
   - from: DR11
   - note: No changes
 - DR11
   - from: DR12
   - note: No changes
 - DR12
   - from: DR10
   - note: No changes
 - DR10
   - from: DR9
   - added_hdus: ['MASK', 'SUPERFLAT', 'WAVELENGTH', 'X', 'PLUGMAP', 'SKY', 'WAVEDISP', 'IVAR']
   - removed_hdus: ['']

---
## Example HDU List


### HDU0: PRIMARY
Flux density in units of 10^{-17} erg/s/cm^2/A.
Many header keywords are propagated from the input raw data file.

#### HDU Type: IMAGE
#### HDU Size:  15 MB

##### Header Table Caption for HDU0
Key | Value | Comment | |
| --- | --- | --- | --- |
| SIMPLE | True | conforms to FITS standard |
| BITPIX | -64 | array data type |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 4128 | Number of wavelength bins (CCD rows) |
| NAXIS2 | 500 | Number of spectra |
| EXTEND | True |  |
| TELESCOP | SDSS 2.5-M | Sloan Digital Sky Survey |
| FILENAME | sdR-b1-00108607.fit | migration: description of keyword/column is None in database. Needs update |
| CAMERAS | b1 | migration: description of keyword/column is None in database. Needs update |
| NGUIDE | 0 | Number of guider frames during exposure |
| SEEING20 | 0.0 | 20% seeing during exposure (arcsec) |
| SEEING50 | 0.0 | 50% seeing during exposure (arcsec) |
| SEEING80 | 0.0 | 80% seeing during exposure (arcsec) |
| RMSOFF20 | 0.0 | 20% RMS offset of guide fibers (arcsec) |
| RMSOFF50 | 0.0 | 50% RMS offset of guide fibers (arcsec) |
| RMSOFF80 | 0.0 | 80% RMS offset of guide fibers (arcsec) |
| EXPOSURE | 108607 | migration: description of keyword/column is None in database. Needs update |
| DAQVER | 1.2.8 | migration: description of keyword/column is None in database. Needs update |
| CAMDAQ | 1.4.1:32 | migration: description of keyword/column is None in database. Needs update |
| ERRCNT | NONE | migration: description of keyword/column is None in database. Needs update |
| SYNCERR | NONE | migration: description of keyword/column is None in database. Needs update |
| SLINES | NONE | migration: description of keyword/column is None in database. Needs update |
| PIXERR | NONE | migration: description of keyword/column is None in database. Needs update |
| PLINES | NONE | migration: description of keyword/column is None in database. Needs update |
| FLAVOR | science | exposure type, SDSS spectro style |
| BOSSVER | v2_0_17 | ICC version |
| MJD | 55244 | APO fMJD day at start of exposure |
| TAI-BEG | 4773100429.0 | MJD(TAI) seconds at start of integration |
| DATE-OBS | 2010-02-17T05:13:49 | TAI date at start of integration |
| FF | 0 0 0 0 | FF lamps 1:on 0:0ff |
| NE | 0 0 0 0 | NE lamps 1:on 0:0ff |
| HGCD | 0 0 0 0 | HGCD lamps 1:on 0:0ff |
| FFS | 0 0 0 0 0 0 0 0 | Flatfield Screen 1:closed 0:open |
| OBJSYS | ICRS | The TCC objSys |
| RA | 120.077668 | RA of telescope boresight (deg) |
| DEC | 53.274823 | Dec of telescope boresight (deg) |
| EQUINOX | 2000.0 | migration: description of keyword/column is None in database. Needs update |
| RADECSYS | FK5 | migration: description of keyword/column is None in database. Needs update |
| RADEG | 120.0777 | RA of telescope pointing(deg) |
| DECDEG | 53.2734 | Dec of telescope pointing (deg) |
| ROTPOS | 0.0 | Rotator request position (deg) |
| BOREOFFX | 0.0 | TCC Boresight offset, deg |
| BOREOFFY | 0.0 | TCC Boresight offset, deg |
| ARCOFFX | -1.9e-05 | TCC ObjArcOff, deg |
| ARCOFFY | 0.001423 | TCC ObjArcOff, deg |
| OBJOFFX | 0.0 | TCC ObjOff, deg |
| OBJOFFY | 0.0 | TCC ObjOff, deg |
| CALOFFX | 0.002 | TCC CalibOff, deg |
| CALOFFY | -0.001 | TCC CalibOff, deg |
| CALOFFR | 0.0 | TCC CalibOff, deg |
| GUIDOFFX | 0.0 | TCC GuideOff, deg |
| GUIDOFFY | 0.0 | TCC GuideOff, deg |
| GUIDOFFR | 0.005168 | TCC GuideOff, deg |
| AZ | 178.965 | Azimuth axis pos. (approx, deg) |
| ALT | 69.537 | Altitude axis pos. (approx, deg) |
| AIRMASS | 1.06777 | migration: description of keyword/column is None in database. Needs update |
| IPA | -1.357 | Rotator axis pos. (approx, deg) |
| SPA | 178.7161963019371 | TCC SpiderInstAng |
| FOCUS | 526.58 | User-specified focus offset (um) |
| M2PISTON | 2230.72 | TCC SecOrient |
| M2XTILT | -4.0 | TCC SecOrient |
| M2YTILT | -9.02 | TCC SecOrient |
| M2XTRAN | 10.02 | TCC SecOrient |
| M2YTRAN | -14.49 | TCC SecOrient |
| M1PISTON | 691.26 | TCC PrimOrient |
| M1XTILT | -3.04 | TCC PrimOrient |
| M1YTILT | 5.26 | TCC PrimOrient |
| M1XTRAN | 277.36 | TCC PrimOrient |
| M1YTRAN | 178.07 | TCC PrimOrient |
| SCALE | 0.99993 | User-specified scale factor |
| NAME | 3682-55244-01 | The name of the currently loaded plate |
| PLATEID | 3682 | The currently loaded plate |
| TILEID | 10102 | Cartridge used in this plugging |
| CARTID | 12 | Cartridge used in this plugging |
| MAPID | 1 | The mapping version of the loaded plate |
| POINTING | A | The currently specified pointing |
| GUIDER1 | proc-gimg-0433.fits | The first guider image |
| COLLA | -8460 | The position of the A collimator motor |
| COLLB | -8486 | The position of the B collimator motor |
| COLLC | -8505 | The position of the C collimator motor |
| HARTMANN | Out | Hartmanns: Left,Right,Out |
| MC1HUMHT | 38.1 | sp1 mech Hartmann humidity, % |
| MC1HUMCO | 32.9 | sp1 mech Central optics humidity, % |
| MC1TEMDN | -1.1 | sp1 mech Median temp, C |
| MC1THT | -1.3 | sp1 mech Hartmann Top Temp, C |
| MC1TRCB | -1.5 | sp1 mech Red Cam Bottom Temp, C |
| MC1TRCT | -0.7 | sp1 mech Red Cam Top Temp, C |
| MC1TBCB | -1.3 | sp1 mech Blue Cam Bottom Temp, C |
| MC1TBCT | -1.1 | sp1 mech Blue Cam Top Temp, C |
| MC2HUMHT | 31.7 | migration: description of keyword/column not found. Needs update |
| MC2HUMCO | 19.4 | migration: description of keyword/column not found. Needs update |
| MC2TEMDN | -2.0 | migration: description of keyword/column not found. Needs update |
| MC2THT | -1.3 | migration: description of keyword/column not found. Needs update |
| MC2TRCB | -1.7 | migration: description of keyword/column not found. Needs update |
| MC2TRCT | -2.0 | migration: description of keyword/column not found. Needs update |
| MC2TBCB | -2.1 | migration: description of keyword/column not found. Needs update |
| MC2TBCT | -1.6 | migration: description of keyword/column not found. Needs update |
| GUIDERN | proc-gimg-0480.fits | The last guider image |
| EXPTIME | 900.0 | measured exposure time, s |
| SHOPETIM | 0.73 | open shutter transit time, s |
| SHCLOTIM | 0.555 | close shutter transit time, s |
| CAMROW | 0 | migration: description of keyword/column is None in database. Needs update |
| CAMCOL | 1 | migration: description of keyword/column is None in database. Needs update |
| AUTHOR | Scott Burles & David Schlegel | migration: description of keyword/column is None in database. Needs update |
| VERSIDL | 7.1.1 | Version of IDL |
| VERSUTIL | v5_5_17 | Version of idlutils |
| VERSREAD | v5_13_2 | Version of idlspec2d for pre-processing raw dat |
| VERS2D | v5_13_2 | Version of idlspec2d for 2D reduction |
| VERSLOG | trunk 26892 | Version of SPECLOG product |
| VERSFLAT | v1_32 | Version of SPECFLAT product |
| TWOPHASE | False | Extra 1/3 row in wavecal at array center? |
| QUALITY | excellent | migration: description of keyword/column is None in database. Needs update |
| RDNOISE0 | 2.02492 | CCD read noise amp 0 [electrons] |
| RDNOISE1 | 1.97456 | CCD read noise amp 1 [electrons] |
| RDNOISE2 | 1.90726 | CCD read noise amp 2 [electrons] |
| RDNOISE3 | 1.87718 | CCD read noise amp 3 [electrons] |
| PIXFLAT | pixflatave-55056-b1.fits.gz | pixel flat file applied |
| BADPIXEL | badpixels-55056-b1.fits.gz | bad-pixel mask file applied |
| RUN2D | v5_13_2 | Spectro-2D reduction name |
| TAI-END | 4773101329.0 | migration: description of keyword/column is None in database. Needs update |
| FRAMESN2 | 2.64765 | (S/N)^2 at fidicial magnitude |
| DEREDSN2 | 2.64765 | Extinction corrected (S/N)^2 (like quick redux) |
| REDDEN01 | 0.2099 | Median extinction in u-band |
| REDDEN02 | 0.1544 | Median extinction in g-band |
| REDDEN03 | 0.112 | Median extinction in r-band |
| REDDEN04 | 0.0849 | Median extinction in i-band |
| REDDEN05 | 0.0602 | Median extinction in z-band |
| XSIGMA | 1.06385 | migration: description of keyword/column is None in database. Needs update |
| WSIGMA | 1.11098 | migration: description of keyword/column is None in database. Needs update |
| PLUGFILE | plPlugMapM-3682-55244-01.par | migration: description of keyword/column is None in database. Needs update |
| FLATFILE | sdR-b1-00108611.fit | migration: description of keyword/column is None in database. Needs update |
| ARCFILE | sdR-b1-00108612.fit | migration: description of keyword/column is None in database. Needs update |
| OBJFILE | sdR-b1-00108607.fit | migration: description of keyword/column is None in database. Needs update |
| LAMPLIST | lamphgcdne.dat | migration: description of keyword/column is None in database. Needs update |
| SKYLIST | skylines.dat | migration: description of keyword/column is None in database. Needs update |
| HELIO_RV | 15.3851487552 | Heliocentric correction (added to velocities) |
| VACUUM | True | Wavelengths are in vacuum |
| SFLATTEN | True | Superflat has been applied |
| PSFSKY | 3 | Order of PSF skysubtraction |
| SKYCHI2 | 1.03328748085 | Mean chi^2 of sky-subtraction |
| PREJECT | 0.2 | Profile area rejection threshold |
| LOWREJ | 4 | Extraction: low rejection |
| HIGHREJ | 4 | Extraction: high rejection |
| SCATPOLY | 0 | Extraction: Order of scattered light polynomial |
| PROFTYPE | 1 | Extraction profile: 1=Gaussian |
| NFITPOLY | 1 | Extraction: Number of parameters in each profil |
| XCHI2 | 0.0 | Extraction: Mean chi^2 |
| BUNIT | 1E-17 erg/cm^2/s/Ang | migration: description of keyword/column is None in database. Needs update |



### HDU1: IVAR
Contains the estimated inverse variance (i.e., the inverse of the
square of the estimated error) of the flux density of
each spectrum, in units of (10^-17 erg/s/cm^2/Ang)^-2.  It is set to
zero (i.e., infinite error) for pixels with flags indicating that the
data are unreliable.

#### HDU Type: IMAGE
#### HDU Size:  15 MB

##### Header Table Caption for HDU1
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -64 | i.e. 32-bit float |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 4128 | number of wavelength bins |
| NAXIS2 | 500 | number of spectra |
| EXTNAME | IVAR | extension name |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |



### HDU2: MASK
Mask bits for this image.  See the spPlate data model for the meaning
of the mask bits.

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU2
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | 32 | i.e. 32-bit integer |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 4128 | number rof wavelength bins |
| NAXIS2 | 500 | number of spectra |
| EXTNAME | MASK | extension name |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |



### HDU3: WAVELENGTH
Wavelength solution in log-10 Angstroms (vacuum)

#### HDU Type: IMAGE
#### HDU Size:  15 MB

##### Header Table Caption for HDU3
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | Image Extension created by MWRFITS v1.4a |
| BITPIX | -64 | i.e. 64-bit double precision float |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 4128 | number of wavelength bins |
| NAXIS2 | 500 | number of spectra |
| EXTNAME | WAVELENGTH | extension name |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |



### HDU4: WAVEDISP
Wavelength dispersion in units of (10^(-4) log-10 wavelength)^(-1) [FLOAT]
         (these are the same units as in the combined-spectrum spPlate file)

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU4
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | Image Extension created by MWRFITS v1.4a |
| BITPIX | -32 | i.e. 32-bit float |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 4128 | number of wavelength bins |
| NAXIS2 | 500 | number of spectra |
| EXTNAME | WAVEDISP | extension name |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |



### HDU5: PLUGMAP
Plug-map structure from
<a href="/datamodel/files/PLATELIST_DIR/runs/PLATERUN/plPlugMap.html">plPlugMapM</a>
file.  For BOSS this includes the following columns:

#### HDU Type: BINARY TABLE
#### HDU Size:  129 KB

##### Binary Table Caption for HDU5
Name | Type | Unit | Description |
| --- | --- | --- | --- |
 | OBJID | int32[5] | migration: description of keyword/column is None in database. Needs update | i4  array[5] |
 | HOLETYPE | char[6] | migration: description of keyword/column is None in database. Needs update | S6 |
 | RA | float64 | migration: description of keyword/column is None in database. Needs update | f8 |
 | DEC | float64 | migration: description of keyword/column is None in database. Needs update | f8 |
 | MAG | float32[5] | migration: description of keyword/column is None in database. Needs update | f4  array[5] |
 | STARL | float32 | migration: description of keyword/column is None in database. Needs update | f4 |
 | EXPL | float32 | migration: description of keyword/column is None in database. Needs update | f4 |
 | DEVAUCL | float32 | migration: description of keyword/column is None in database. Needs update | f4 |
 | OBJTYPE | char[16] | migration: description of keyword/column is None in database. Needs update | S16 |
 | XFOCAL | float64 | migration: description of keyword/column is None in database. Needs update | f8 |
 | YFOCAL | float64 | migration: description of keyword/column is None in database. Needs update | f8 |
 | SPECTROGRAPHID | int32 | migration: description of keyword/column is None in database. Needs update | i4 |
 | FIBERID | int32 | migration: description of keyword/column is None in database. Needs update | i4 |
 | THROUGHPUT | int32 | migration: description of keyword/column is None in database. Needs update | i4 |
 | PRIMTARGET | int32 | migration: description of keyword/column is None in database. Needs update | i4 |
 | SECTARGET | int32 | migration: description of keyword/column is None in database. Needs update | i4 |
 | OFFSETID | int32 | migration: description of keyword/column is None in database. Needs update | i4 |
 | SCI_EXPTIME | float32 | migration: description of keyword/column is None in database. Needs update | f4 |
 | SOURCETYPE | char[4] | migration: description of keyword/column is None in database. Needs update | S4 |
 | LAMBDA_EFF | float32 | migration: description of keyword/column is None in database. Needs update | f4 |
 | ZOFFSET | float32 | migration: description of keyword/column is None in database. Needs update | f4 |
 | BLUEFIBER | int32 | migration: description of keyword/column is None in database. Needs update | i4 |
 | BOSS_TARGET1 | int64 | migration: description of keyword/column is None in database. Needs update | i8 |
 | BOSS_TARGET2 | int64 | migration: description of keyword/column is None in database. Needs update | i8 |
 | ANCILLARY_TARGET1 | int64 | migration: description of keyword/column is None in database. Needs update | i8 |
 | ANCILLARY_TARGET2 | int64 | migration: description of keyword/column is None in database. Needs update | i8 |
 | RUN | int32 | migration: description of keyword/column is None in database. Needs update | i4 |
 | RERUN | char[4] | migration: description of keyword/column is None in database. Needs update | S4 |
 | CAMCOL | int32 | migration: description of keyword/column is None in database. Needs update | i4 |
 | FIELD | int32 | migration: description of keyword/column is None in database. Needs update | i4 |
 | ID | int32 | migration: description of keyword/column is None in database. Needs update | i4 |
 | CALIBFLUX | float32[5] | migration: description of keyword/column is None in database. Needs update | f4  array[5] |
 | CALIBFLUX_IVAR | float32[5] | migration: description of keyword/column is None in database. Needs update | f4  array[5] |
 | CALIB_STATUS | int32[5] | migration: description of keyword/column is None in database. Needs update | i4  array[5] |
 | SFD_EBV | float32 | migration: description of keyword/column is None in database. Needs update | f4 |



### HDU6: SKY
Sky flux in units of 10^(-17) erg/s/cm^2/Ang

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU6
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | i.e. 32-bit float |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 4128 | number of flux bins (ccd rows) |
| NAXIS2 | 500 | number of spectra |
| EXTNAME | SKY | extension name |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |



### HDU7: X
HDU #7 = X position on the CCD

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU7
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | i.e. 32-bit float |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 4128 | number of flux bins (ccd rows) |
| NAXIS2 | 500 | number of spectra |
| EXTNAME | X | extension name |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |



### HDU8: SUPERFLAT
HDU #8 = Superflat vector evaluated at all extracted pixels

#### HDU Type: IMAGE
#### HDU Size:  7 MB

##### Header Table Caption for HDU8
Key | Value | Comment | |
| --- | --- | --- | --- |
| XTENSION | IMAGE | binary table extension |
| BITPIX | -32 | i.e. 32-bit float |
| NAXIS | 2 | number of array dimensions |
| NAXIS1 | 4128 | number of flux bins (ccd rows) |
| NAXIS2 | 500 | number of spectra |
| EXTNAME | SUPERFLAT | extension name |
| PCOUNT | 0 | number of group parameters |
| GCOUNT | 1 | number of groups |


